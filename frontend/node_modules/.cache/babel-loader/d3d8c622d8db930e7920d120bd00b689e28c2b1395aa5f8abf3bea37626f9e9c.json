{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kashif\\\\clinic-management-system\\\\frontend\\\\src\\\\pages\\\\Dispensary.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport { dispensaryAPI, appointmentAPI, medicinesAPI } from '../services/api';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst emptyItem = {\n  name: '',\n  quantity: 1,\n  unitPrice: 0\n};\nconst Dispensary = () => {\n  _s();\n  var _selected$patient, _selected$patient2, _selected$dailyToken, _selected$items;\n  const [mode, setMode] = useState('token'); // 'token' | 'patient'\n  const [date, setDate] = useState('');\n  const [token, setToken] = useState('');\n  const [patientId, setPatientId] = useState('');\n  const [items, setItems] = useState([{\n    ...emptyItem\n  }]);\n  const [tax, setTax] = useState('0');\n  const [loading, setLoading] = useState(false);\n  const [queryDate, setQueryDate] = useState('');\n  const [queryToken, setQueryToken] = useState('');\n  const [queryPatientId, setQueryPatientId] = useState('');\n  const [results, setResults] = useState([]);\n  const [selected, setSelected] = useState(null);\n  const [payAmount, setPayAmount] = useState('');\n  const billRef = useRef(null);\n  const [queryLoading, setQueryLoading] = useState(false);\n\n  // Appointment filter/prefill\n  const [apptDate, setApptDate] = useState('');\n  const [apptStatus, setApptStatus] = useState('');\n  const [apptLoading, setApptLoading] = useState(false);\n  const [appointments, setAppointments] = useState([]);\n  const [selectedAppt, setSelectedAppt] = useState(null);\n\n  // Alternatives search by salt per item index\n  const [altIdx, setAltIdx] = useState(null);\n  const [altSalt, setAltSalt] = useState('');\n  const [altList, setAltList] = useState([]);\n  const [altLoading, setAltLoading] = useState(false);\n  const updateItem = (idx, field, value) => {\n    setItems(prev => prev.map((it, i) => i === idx ? {\n      ...it,\n      [field]: value\n    } : it));\n  };\n\n  // Appointments search for chemist\n  const onQueryAppointments = async () => {\n    try {\n      setApptLoading(true);\n      const params = {};\n      if (apptDate) params.date = apptDate;\n      if (apptStatus) params.status = apptStatus;\n      const res = await appointmentAPI.getAll(params);\n      setAppointments(res.data.data || []);\n      setSelectedAppt(null);\n    } catch (e) {\n      var _e$response, _e$response$data;\n      const msg = ((_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || 'Failed to fetch appointments';\n      toast.error(msg);\n    } finally {\n      setApptLoading(false);\n    }\n  };\n  const onChooseAppointment = async appt => {\n    setSelectedAppt(appt);\n    try {\n      const res = await dispensaryAPI.prefill({\n        appointmentId: appt._id\n      });\n      const pre = res.data.data || [];\n      if (pre.length === 0) toast('No prescription found for this appointment');\n      setItems(pre.map(x => ({\n        name: x.name,\n        quantity: x.quantity || 1,\n        unitPrice: x.unitPrice || 0\n      })));\n      setMode('token');\n      setDate(appt.appointmentDay ? new Date(appt.appointmentDay).toISOString().slice(0, 10) : '');\n      setToken(appt.dailyToken || '');\n      setPatientId('');\n    } catch (e) {\n      var _e$response2, _e$response2$data;\n      const msg = ((_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message) || 'Failed to prefill from prescription';\n      toast.error(msg);\n    }\n  };\n\n  // Alternatives by salt\n  const onSearchAlternatives = async idx => {\n    try {\n      if (!altSalt) return toast.error('Enter salt to search alternatives');\n      setAltLoading(true);\n      setAltIdx(idx);\n      const res = await medicinesAPI.getAll({\n        salt: altSalt,\n        limit: 10\n      });\n      setAltList(res.data.data || []);\n    } catch (e) {\n      setAltList([]);\n    } finally {\n      setAltLoading(false);\n    }\n  };\n  const onPickAlternative = m => {\n    if (altIdx === null) return;\n    updateItem(altIdx, 'name', m.name || '');\n    updateItem(altIdx, 'unitPrice', m.sellingPrice || 0);\n    setAltIdx(null);\n    setAltSalt('');\n    setAltList([]);\n  };\n  const addItem = () => setItems(prev => [...prev, {\n    ...emptyItem\n  }]);\n  const removeItem = idx => setItems(prev => prev.filter((_, i) => i !== idx));\n  const computeSubtotal = () => items.reduce((sum, it) => sum + Number(it.quantity || 0) * Number(it.unitPrice || 0), 0);\n  const subtotal = computeSubtotal();\n  const total = subtotal + Number(tax || 0);\n\n  // Quantity helpers\n  const setDays = (idx, days) => {\n    updateItem(idx, 'days', days);\n    const qty = Number(days || 0) * Number(items[idx].doses || 0 || 1);\n    updateItem(idx, 'quantity', qty);\n  };\n  const setDoses = (idx, doses) => {\n    updateItem(idx, 'doses', doses);\n    const qty = Number(doses || 0) * Number(items[idx].days || 0 || 1);\n    updateItem(idx, 'quantity', qty);\n  };\n  const onCreate = async () => {\n    try {\n      setLoading(true);\n      const payload = {\n        items,\n        tax: Number(tax || 0)\n      };\n      if (mode === 'token') {\n        if (!date || !token) return toast.error('Provide date and token');\n        payload.date = date;\n        payload.token = Number(token);\n      } else {\n        if (!patientId) return toast.error('Provide patientId');\n        payload.patient = patientId;\n      }\n      const res = await dispensaryAPI.create(payload);\n      toast.success('Dispense created');\n      // Reset minimal\n      setItems([{\n        ...emptyItem\n      }]);\n      setTax('0');\n    } catch (e) {\n      var _e$response3, _e$response3$data;\n      const msg = ((_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : _e$response3$data.message) || 'Failed to create dispense';\n      toast.error(msg);\n      console.error('Create dispense error:', e);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const onSelect = d => {\n    setSelected(d);\n    setPayAmount('');\n  };\n  const onPay = async () => {\n    if (!(selected !== null && selected !== void 0 && selected._id)) return toast.error('Select a dispense first');\n    if (!payAmount || Number(payAmount) <= 0) return toast.error('Enter valid amount');\n    try {\n      const res = await dispensaryAPI.pay(selected._id, {\n        amount: Number(payAmount)\n      });\n      toast.success('Payment recorded');\n      setSelected(res.data.data);\n      // refresh list entry\n      setResults(prev => prev.map(x => x._id === res.data.data._id ? res.data.data : x));\n      setPayAmount('');\n    } catch (e) {\n      var _e$response4, _e$response4$data;\n      const msg = ((_e$response4 = e.response) === null || _e$response4 === void 0 ? void 0 : (_e$response4$data = _e$response4.data) === null || _e$response4$data === void 0 ? void 0 : _e$response4$data.message) || 'Payment failed';\n      toast.error(msg);\n      console.error('Payment error:', e);\n    }\n  };\n  const onPrint = () => {\n    if (!billRef.current) return;\n    const printContents = billRef.current.innerHTML;\n    const win = window.open('', '', 'width=800,height=600');\n    win.document.write('<html><head><title>Bill</title>');\n    win.document.write('<style>body{font-family:Arial;padding:16px} table{width:100%;border-collapse:collapse} th,td{border:1px solid #ddd;padding:8px;text-align:left}</style>');\n    win.document.write('</head><body>');\n    win.document.write(printContents);\n    win.document.write('</body></html>');\n    win.document.close();\n    win.focus();\n    win.print();\n    win.close();\n  };\n  const onQuery = async () => {\n    try {\n      setQueryLoading(true);\n      const params = {};\n      if (queryPatientId) params.patientId = queryPatientId;\n      if (queryDate && queryToken) {\n        params.date = queryDate;\n        params.token = queryToken;\n      }\n      if (!params.patientId && !params.date) return toast.error('Provide patientId or date+token');\n      const res = await dispensaryAPI.getAll(params);\n      setResults(res.data.data || []);\n      setSelected(null);\n    } catch (e) {\n      var _e$response5, _e$response5$data;\n      const msg = ((_e$response5 = e.response) === null || _e$response5 === void 0 ? void 0 : (_e$response5$data = _e$response5.data) === null || _e$response5$data === void 0 ? void 0 : _e$response5$data.message) || 'Failed to fetch dispenses';\n      toast.error(msg);\n      console.error('Query dispenses error:', e);\n    } finally {\n      setQueryLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold text-gray-900 mb-4\",\n        children: \"Create Dispense\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-4 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"mode\",\n            checked: mode === 'token',\n            onChange: () => setMode('token')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this), \" By Token\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"mode\",\n            checked: mode === 'patient',\n            onChange: () => setMode('patient')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), \" By Patient ID\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), mode === 'token' ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            className: \"input-field\",\n            value: date,\n            onChange: e => setDate(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Token\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            className: \"input-field\",\n            value: token,\n            onChange: e => setToken(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Patient ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"input-field\",\n            value: patientId,\n            onChange: e => setPatientId(e.target.value),\n            placeholder: \"Mongo ObjectId\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: items.map((it, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-12 gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input-field md:col-span-4\",\n              placeholder: \"Medicine name\",\n              value: it.name,\n              onChange: e => updateItem(idx, 'name', e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-3 flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                className: \"input-field\",\n                placeholder: \"Days\",\n                value: it.days || '',\n                onChange: e => setDays(idx, e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                className: \"input-field\",\n                placeholder: \"Doses/day\",\n                value: it.doses || '',\n                onChange: e => setDoses(idx, e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              className: \"input-field md:col-span-1\",\n              placeholder: \"Qty\",\n              value: it.quantity,\n              onChange: e => updateItem(idx, 'quantity', e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              className: \"input-field md:col-span-2\",\n              placeholder: \"Unit Price\",\n              value: it.unitPrice,\n              onChange: e => updateItem(idx, 'unitPrice', e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2 flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input-field\",\n                placeholder: \"Salt\",\n                value: altIdx === idx ? altSalt : '',\n                onChange: e => {\n                  setAltIdx(idx);\n                  setAltSalt(e.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn-secondary\",\n                onClick: () => onSearchAlternatives(idx),\n                children: \"Alt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn-secondary\",\n                onClick: () => removeItem(idx),\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 17\n            }, this), altIdx === idx && (altList.length > 0 || altLoading) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-12 border rounded p-2 bg-white\",\n              children: [altLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-500\",\n                children: \"Searching alternatives...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 36\n              }, this), altList.map(m => /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"block w-full text-left px-3 py-1 hover:bg-gray-50\",\n                onClick: () => onPickAlternative(m),\n                children: [m.name, \" \", m.strength ? `(${m.strength})` : '', \" \", m.form ? `- ${m.form}` : '', \" \\u2014 Rs. \", Number(m.sellingPrice || 0).toFixed(2)]\n              }, m._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 23\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 19\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-secondary\",\n            onClick: addItem,\n            children: \"Add Item\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Tax\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            className: \"input-field\",\n            value: tax,\n            onChange: e => setTax(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-2 flex items-end justify-end\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-right\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Subtotal: \", subtotal.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Tax: \", Number(tax || 0).toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-lg font-semibold\",\n              children: [\"Total: \", total.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-primary\",\n        onClick: onCreate,\n        disabled: loading,\n        children: loading ? 'Saving...' : 'Create Dispense'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold text-gray-900 mb-4\",\n        children: \"Appointments for Dispensing\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-4 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            className: \"input-field\",\n            value: apptDate,\n            onChange: e => setApptDate(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"input-field\",\n            value: apptStatus,\n            onChange: e => setApptStatus(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"All\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"scheduled\",\n              children: \"Scheduled\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"completed\",\n              children: \"Completed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"cancelled\",\n              children: \"Cancelled\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"no_show\",\n              children: \"No Show\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-end\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary\",\n            onClick: onQueryAppointments,\n            disabled: apptLoading,\n            children: apptLoading ? 'Loading...' : 'Search'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full divide-y divide-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-50\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Patient\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Time\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Token\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"bg-white divide-y divide-gray-200\",\n            children: [appointments.map(a => {\n              var _a$patient, _a$patient2;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: (selectedAppt === null || selectedAppt === void 0 ? void 0 : selectedAppt._id) === a._id ? 'bg-primary-50' : '',\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: [(_a$patient = a.patient) === null || _a$patient === void 0 ? void 0 : _a$patient.firstName, \" \", (_a$patient2 = a.patient) === null || _a$patient2 === void 0 ? void 0 : _a$patient2.lastName]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 328,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: a.appointmentDate ? new Date(a.appointmentDate).toLocaleDateString() : '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: a.appointmentTime || '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: typeof a.dailyToken !== 'undefined' ? a.dailyToken : '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: a.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-right\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-secondary\",\n                    onClick: () => onChooseAppointment(a),\n                    children: \"Select\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 334,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 19\n                }, this)]\n              }, a._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 17\n              }, this);\n            }), appointments.length === 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"6\",\n                className: \"px-6 py-6 text-center text-gray-500\",\n                children: \"No appointments\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold text-gray-900 mb-4\",\n        children: \"Find Dispenses\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-4 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Patient ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"input-field\",\n            value: queryPatientId,\n            onChange: e => setQueryPatientId(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            className: \"input-field\",\n            value: queryDate,\n            onChange: e => setQueryDate(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Token\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            className: \"input-field\",\n            value: queryToken,\n            onChange: e => setQueryToken(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-end\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary\",\n            onClick: onQuery,\n            disabled: queryLoading,\n            children: queryLoading ? 'Searching...' : 'Search'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full divide-y divide-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-50\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Patient\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Token\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Subtotal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Tax\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"bg-white divide-y divide-gray-200\",\n            children: [results.map(d => {\n              var _d$patient, _d$patient2, _d$dailyToken;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: (selected === null || selected === void 0 ? void 0 : selected._id) === d._id ? 'bg-primary-50' : '',\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: [(_d$patient = d.patient) === null || _d$patient === void 0 ? void 0 : _d$patient.firstName, \" \", (_d$patient2 = d.patient) === null || _d$patient2 === void 0 ? void 0 : _d$patient2.lastName]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: (_d$dailyToken = d.dailyToken) !== null && _d$dailyToken !== void 0 ? _d$dailyToken : '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: Number(d.subtotal).toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: Number(d.tax).toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: Number(d.total).toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: d.paymentStatus\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-right\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-secondary\",\n                    onClick: () => onSelect(d),\n                    children: \"Select\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 391,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 19\n                }, this)]\n              }, d._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 17\n              }, this);\n            }), results.length === 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"6\",\n                className: \"px-6 py-6 text-center text-gray-500\",\n                children: \"No dispenses\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 7\n    }, this), selected && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-gray-900\",\n          children: \"Payment & Bill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-secondary\",\n          onClick: () => setSelected(null),\n          children: \"Clear\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Amount to pay\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            className: \"input-field\",\n            value: payAmount,\n            onChange: e => setPayAmount(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-end\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary\",\n            onClick: onPay,\n            children: \"Record Payment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-end\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-secondary\",\n            onClick: onPrint,\n            disabled: !selected.billNumber && selected.paymentStatus !== 'paid',\n            children: \"Print Bill\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: billRef,\n        className: \"bg-white p-4 rounded border\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold mb-2\",\n          children: \"Clinic Bill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-600 mb-4\",\n          children: [\"Bill No: \", selected.billNumber || '(generated after payment)', \" | Date: \", new Date(selected.createdAt).toLocaleString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Patient:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 35\n          }, this), \" \", (_selected$patient = selected.patient) === null || _selected$patient === void 0 ? void 0 : _selected$patient.firstName, \" \", (_selected$patient2 = selected.patient) === null || _selected$patient2 === void 0 ? void 0 : _selected$patient2.lastName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Token:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 35\n          }, this), \" \", (_selected$dailyToken = selected.dailyToken) !== null && _selected$dailyToken !== void 0 ? _selected$dailyToken : '-', \" | \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Day:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 90\n          }, this), \" \", selected.appointmentDay ? new Date(selected.appointmentDay).toLocaleDateString() : '-']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Item\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Qty\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Unit Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 46\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Amount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 65\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: (_selected$items = selected.items) === null || _selected$items === void 0 ? void 0 : _selected$items.map((it, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: it.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: it.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 51\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: Number(it.unitPrice).toFixed(2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 73\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: (Number(it.quantity) * Number(it.unitPrice)).toFixed(2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 115\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-right mt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Subtotal: \", Number(selected.subtotal).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Tax: \", Number(selected.tax).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-semibold\",\n            children: [\"Total: \", Number(selected.total).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Paid: \", Number(selected.paidAmount || 0).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Status: \", selected.paymentStatus]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 5\n  }, this);\n};\n_s(Dispensary, \"icHlSMkk+i5yoYQePod99QR3ijc=\");\n_c = Dispensary;\nexport default Dispensary;\nvar _c;\n$RefreshReg$(_c, \"Dispensary\");","map":{"version":3,"names":["React","useRef","useState","dispensaryAPI","appointmentAPI","medicinesAPI","toast","jsxDEV","_jsxDEV","emptyItem","name","quantity","unitPrice","Dispensary","_s","_selected$patient","_selected$patient2","_selected$dailyToken","_selected$items","mode","setMode","date","setDate","token","setToken","patientId","setPatientId","items","setItems","tax","setTax","loading","setLoading","queryDate","setQueryDate","queryToken","setQueryToken","queryPatientId","setQueryPatientId","results","setResults","selected","setSelected","payAmount","setPayAmount","billRef","queryLoading","setQueryLoading","apptDate","setApptDate","apptStatus","setApptStatus","apptLoading","setApptLoading","appointments","setAppointments","selectedAppt","setSelectedAppt","altIdx","setAltIdx","altSalt","setAltSalt","altList","setAltList","altLoading","setAltLoading","updateItem","idx","field","value","prev","map","it","i","onQueryAppointments","params","status","res","getAll","data","e","_e$response","_e$response$data","msg","response","message","error","onChooseAppointment","appt","prefill","appointmentId","_id","pre","length","x","appointmentDay","Date","toISOString","slice","dailyToken","_e$response2","_e$response2$data","onSearchAlternatives","salt","limit","onPickAlternative","m","sellingPrice","addItem","removeItem","filter","_","computeSubtotal","reduce","sum","Number","subtotal","total","setDays","days","qty","doses","setDoses","onCreate","payload","patient","create","success","_e$response3","_e$response3$data","console","onSelect","d","onPay","pay","amount","_e$response4","_e$response4$data","onPrint","current","printContents","innerHTML","win","window","open","document","write","close","focus","print","onQuery","_e$response5","_e$response5$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","checked","onChange","target","placeholder","onClick","strength","form","toFixed","disabled","a","_a$patient","_a$patient2","firstName","lastName","appointmentDate","toLocaleDateString","appointmentTime","colSpan","_d$patient","_d$patient2","_d$dailyToken","paymentStatus","billNumber","ref","createdAt","toLocaleString","paidAmount","_c","$RefreshReg$"],"sources":["C:/Users/Kashif/clinic-management-system/frontend/src/pages/Dispensary.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { dispensaryAPI, appointmentAPI, medicinesAPI } from '../services/api';\nimport toast from 'react-hot-toast';\n\nconst emptyItem = { name: '', quantity: 1, unitPrice: 0 };\n\nconst Dispensary = () => {\n  const [mode, setMode] = useState('token'); // 'token' | 'patient'\n  const [date, setDate] = useState('');\n  const [token, setToken] = useState('');\n  const [patientId, setPatientId] = useState('');\n  const [items, setItems] = useState([{ ...emptyItem }]);\n  const [tax, setTax] = useState('0');\n  const [loading, setLoading] = useState(false);\n\n  const [queryDate, setQueryDate] = useState('');\n  const [queryToken, setQueryToken] = useState('');\n  const [queryPatientId, setQueryPatientId] = useState('');\n  const [results, setResults] = useState([]);\n  const [selected, setSelected] = useState(null);\n  const [payAmount, setPayAmount] = useState('');\n  const billRef = useRef(null);\n  const [queryLoading, setQueryLoading] = useState(false);\n\n  // Appointment filter/prefill\n  const [apptDate, setApptDate] = useState('');\n  const [apptStatus, setApptStatus] = useState('');\n  const [apptLoading, setApptLoading] = useState(false);\n  const [appointments, setAppointments] = useState([]);\n  const [selectedAppt, setSelectedAppt] = useState(null);\n\n  // Alternatives search by salt per item index\n  const [altIdx, setAltIdx] = useState(null);\n  const [altSalt, setAltSalt] = useState('');\n  const [altList, setAltList] = useState([]);\n  const [altLoading, setAltLoading] = useState(false);\n\n  const updateItem = (idx, field, value) => {\n    setItems(prev => prev.map((it, i) => i === idx ? { ...it, [field]: value } : it));\n  };\n\n  // Appointments search for chemist\n  const onQueryAppointments = async () => {\n    try {\n      setApptLoading(true);\n      const params = {};\n      if (apptDate) params.date = apptDate;\n      if (apptStatus) params.status = apptStatus;\n      const res = await appointmentAPI.getAll(params);\n      setAppointments(res.data.data || []);\n      setSelectedAppt(null);\n    } catch (e) {\n      const msg = e.response?.data?.message || 'Failed to fetch appointments';\n      toast.error(msg);\n    } finally {\n      setApptLoading(false);\n    }\n  };\n\n  const onChooseAppointment = async (appt) => {\n    setSelectedAppt(appt);\n    try {\n      const res = await dispensaryAPI.prefill({ appointmentId: appt._id });\n      const pre = res.data.data || [];\n      if (pre.length === 0) toast('No prescription found for this appointment');\n      setItems(pre.map(x => ({ name: x.name, quantity: x.quantity || 1, unitPrice: x.unitPrice || 0 })));\n      setMode('token');\n      setDate(appt.appointmentDay ? new Date(appt.appointmentDay).toISOString().slice(0,10) : '');\n      setToken(appt.dailyToken || '');\n      setPatientId('');\n    } catch (e) {\n      const msg = e.response?.data?.message || 'Failed to prefill from prescription';\n      toast.error(msg);\n    }\n  };\n\n  // Alternatives by salt\n  const onSearchAlternatives = async (idx) => {\n    try {\n      if (!altSalt) return toast.error('Enter salt to search alternatives');\n      setAltLoading(true);\n      setAltIdx(idx);\n      const res = await medicinesAPI.getAll({ salt: altSalt, limit: 10 });\n      setAltList(res.data.data || []);\n    } catch (e) {\n      setAltList([]);\n    } finally {\n      setAltLoading(false);\n    }\n  };\n  const onPickAlternative = (m) => {\n    if (altIdx === null) return;\n    updateItem(altIdx, 'name', m.name || '');\n    updateItem(altIdx, 'unitPrice', m.sellingPrice || 0);\n    setAltIdx(null);\n    setAltSalt('');\n    setAltList([]);\n  };\n\n  const addItem = () => setItems(prev => [...prev, { ...emptyItem }]);\n  const removeItem = (idx) => setItems(prev => prev.filter((_, i) => i !== idx));\n\n  const computeSubtotal = () => items.reduce((sum, it) => sum + (Number(it.quantity || 0) * Number(it.unitPrice || 0)), 0);\n  const subtotal = computeSubtotal();\n  const total = subtotal + Number(tax || 0);\n\n  // Quantity helpers\n  const setDays = (idx, days) => {\n    updateItem(idx, 'days', days);\n    const qty = Number(days || 0) * Number(items[idx].doses || 0 || 1);\n    updateItem(idx, 'quantity', qty);\n  };\n  const setDoses = (idx, doses) => {\n    updateItem(idx, 'doses', doses);\n    const qty = Number(doses || 0) * Number(items[idx].days || 0 || 1);\n    updateItem(idx, 'quantity', qty);\n  };\n\n  const onCreate = async () => {\n    try {\n      setLoading(true);\n      const payload = { items, tax: Number(tax || 0) };\n      if (mode === 'token') {\n        if (!date || !token) return toast.error('Provide date and token');\n        payload.date = date;\n        payload.token = Number(token);\n      } else {\n        if (!patientId) return toast.error('Provide patientId');\n        payload.patient = patientId;\n      }\n      const res = await dispensaryAPI.create(payload);\n      toast.success('Dispense created');\n      // Reset minimal\n      setItems([{ ...emptyItem }]);\n      setTax('0');\n    } catch (e) {\n      const msg = e.response?.data?.message || 'Failed to create dispense';\n      toast.error(msg);\n      console.error('Create dispense error:', e);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onSelect = (d) => {\n    setSelected(d);\n    setPayAmount('');\n  };\n\n  const onPay = async () => {\n    if (!selected?._id) return toast.error('Select a dispense first');\n    if (!payAmount || Number(payAmount) <= 0) return toast.error('Enter valid amount');\n    try {\n      const res = await dispensaryAPI.pay(selected._id, { amount: Number(payAmount) });\n      toast.success('Payment recorded');\n      setSelected(res.data.data);\n      // refresh list entry\n      setResults(prev => prev.map(x => x._id === res.data.data._id ? res.data.data : x));\n      setPayAmount('');\n    } catch (e) {\n      const msg = e.response?.data?.message || 'Payment failed';\n      toast.error(msg);\n      console.error('Payment error:', e);\n    }\n  };\n\n  const onPrint = () => {\n    if (!billRef.current) return;\n    const printContents = billRef.current.innerHTML;\n    const win = window.open('', '', 'width=800,height=600');\n    win.document.write('<html><head><title>Bill</title>');\n    win.document.write('<style>body{font-family:Arial;padding:16px} table{width:100%;border-collapse:collapse} th,td{border:1px solid #ddd;padding:8px;text-align:left}</style>');\n    win.document.write('</head><body>');\n    win.document.write(printContents);\n    win.document.write('</body></html>');\n    win.document.close();\n    win.focus();\n    win.print();\n    win.close();\n  };\n\n  const onQuery = async () => {\n    try {\n      setQueryLoading(true);\n      const params = {};\n      if (queryPatientId) params.patientId = queryPatientId;\n      if (queryDate && queryToken) {\n        params.date = queryDate;\n        params.token = queryToken;\n      }\n      if (!params.patientId && !params.date) return toast.error('Provide patientId or date+token');\n      const res = await dispensaryAPI.getAll(params);\n      setResults(res.data.data || []);\n      setSelected(null);\n    } catch (e) {\n      const msg = e.response?.data?.message || 'Failed to fetch dispenses';\n      toast.error(msg);\n      console.error('Query dispenses error:', e);\n    } finally {\n      setQueryLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"card\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Create Dispense</h2>\n        <div className=\"flex items-center gap-4 mb-4\">\n          <label className=\"flex items-center gap-2\">\n            <input type=\"radio\" name=\"mode\" checked={mode==='token'} onChange={() => setMode('token')} /> By Token\n          </label>\n          <label className=\"flex items-center gap-2\">\n            <input type=\"radio\" name=\"mode\" checked={mode==='patient'} onChange={() => setMode('patient')} /> By Patient ID\n          </label>\n        </div>\n        {mode === 'token' ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n            <div>\n              <label className=\"form-label\">Date</label>\n              <input type=\"date\" className=\"input-field\" value={date} onChange={(e)=>setDate(e.target.value)} />\n            </div>\n            <div>\n              <label className=\"form-label\">Token</label>\n              <input type=\"number\" className=\"input-field\" value={token} onChange={(e)=>setToken(e.target.value)} />\n            </div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n            <div>\n              <label className=\"form-label\">Patient ID</label>\n              <input type=\"text\" className=\"input-field\" value={patientId} onChange={(e)=>setPatientId(e.target.value)} placeholder=\"Mongo ObjectId\" />\n            </div>\n          </div>\n        )}\n\n        <div className=\"mb-4\">\n          <label className=\"form-label\">Items</label>\n          <div className=\"space-y-2\">\n            {items.map((it, idx) => (\n              <div key={idx} className=\"grid grid-cols-1 md:grid-cols-12 gap-2\">\n                <input className=\"input-field md:col-span-4\" placeholder=\"Medicine name\" value={it.name} onChange={(e)=>updateItem(idx,'name',e.target.value)} />\n                <div className=\"md:col-span-3 flex gap-2\">\n                  <input type=\"number\" className=\"input-field\" placeholder=\"Days\" value={it.days||''} onChange={(e)=>setDays(idx, e.target.value)} />\n                  <input type=\"number\" className=\"input-field\" placeholder=\"Doses/day\" value={it.doses||''} onChange={(e)=>setDoses(idx, e.target.value)} />\n                </div>\n                <input type=\"number\" className=\"input-field md:col-span-1\" placeholder=\"Qty\" value={it.quantity} onChange={(e)=>updateItem(idx,'quantity',e.target.value)} />\n                <input type=\"number\" className=\"input-field md:col-span-2\" placeholder=\"Unit Price\" value={it.unitPrice} onChange={(e)=>updateItem(idx,'unitPrice',e.target.value)} />\n                <div className=\"md:col-span-2 flex gap-2\">\n                  <input className=\"input-field\" placeholder=\"Salt\" value={altIdx===idx ? altSalt : ''} onChange={(e)=>{ setAltIdx(idx); setAltSalt(e.target.value); }} />\n                  <button type=\"button\" className=\"btn-secondary\" onClick={()=>onSearchAlternatives(idx)}>Alt</button>\n                  <button type=\"button\" className=\"btn-secondary\" onClick={()=>removeItem(idx)}>Remove</button>\n                </div>\n                {altIdx===idx && (altList.length>0 || altLoading) && (\n                  <div className=\"md:col-span-12 border rounded p-2 bg-white\">\n                    {altLoading && <div className=\"text-sm text-gray-500\">Searching alternatives...</div>}\n                    {altList.map((m)=> (\n                      <button key={m._id} type=\"button\" className=\"block w-full text-left px-3 py-1 hover:bg-gray-50\" onClick={()=>onPickAlternative(m)}>\n                        {m.name} {m.strength?`(${m.strength})`:''} {m.form?`- ${m.form}`:''}  Rs. {Number(m.sellingPrice||0).toFixed(2)}\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n          <div className=\"mt-2\">\n            <button type=\"button\" className=\"btn-secondary\" onClick={addItem}>Add Item</button>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n          <div>\n            <label className=\"form-label\">Tax</label>\n            <input type=\"number\" className=\"input-field\" value={tax} onChange={(e)=>setTax(e.target.value)} />\n          </div>\n          <div className=\"md:col-span-2 flex items-end justify-end\">\n            <div className=\"text-right\">\n              <div className=\"text-sm text-gray-600\">Subtotal: {subtotal.toFixed(2)}</div>\n              <div className=\"text-sm text-gray-600\">Tax: {Number(tax||0).toFixed(2)}</div>\n              <div className=\"text-lg font-semibold\">Total: {total.toFixed(2)}</div>\n            </div>\n          </div>\n        </div>\n\n        <button className=\"btn-primary\" onClick={onCreate} disabled={loading}>\n          {loading ? 'Saving...' : 'Create Dispense'}\n        </button>\n      </div>\n\n      {/* Appointments (Chemist) -> Prefill from prescription */}\n      <div className=\"card\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Appointments for Dispensing</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div>\n            <label className=\"form-label\">Date</label>\n            <input type=\"date\" className=\"input-field\" value={apptDate} onChange={(e)=>setApptDate(e.target.value)} />\n          </div>\n          <div>\n            <label className=\"form-label\">Status</label>\n            <select className=\"input-field\" value={apptStatus} onChange={(e)=>setApptStatus(e.target.value)}>\n              <option value=\"\">All</option>\n              <option value=\"scheduled\">Scheduled</option>\n              <option value=\"completed\">Completed</option>\n              <option value=\"cancelled\">Cancelled</option>\n              <option value=\"no_show\">No Show</option>\n            </select>\n          </div>\n          <div className=\"flex items-end\">\n            <button className=\"btn-primary\" onClick={onQueryAppointments} disabled={apptLoading}>{apptLoading ? 'Loading...' : 'Search'}</button>\n          </div>\n        </div>\n\n        <div className=\"mt-4 overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Patient</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Time</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Token</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                <th className=\"px-6 py-3\"></th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {appointments.map((a)=> (\n                <tr key={a._id} className={selectedAppt?._id===a._id ? 'bg-primary-50' : ''}>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{a.patient?.firstName} {a.patient?.lastName}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{a.appointmentDate ? new Date(a.appointmentDate).toLocaleDateString() : '-'}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{a.appointmentTime || '-'}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{typeof a.dailyToken !== 'undefined' ? a.dailyToken : '-'}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{a.status}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-right\">\n                    <button className=\"btn-secondary\" onClick={()=>onChooseAppointment(a)}>Select</button>\n                  </td>\n                </tr>\n              ))}\n              {appointments.length === 0 && (\n                <tr>\n                  <td colSpan=\"6\" className=\"px-6 py-6 text-center text-gray-500\">No appointments</td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      <div className=\"card\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Find Dispenses</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div>\n            <label className=\"form-label\">Patient ID</label>\n            <input type=\"text\" className=\"input-field\" value={queryPatientId} onChange={(e)=>setQueryPatientId(e.target.value)} />\n          </div>\n          <div>\n            <label className=\"form-label\">Date</label>\n            <input type=\"date\" className=\"input-field\" value={queryDate} onChange={(e)=>setQueryDate(e.target.value)} />\n          </div>\n          <div>\n            <label className=\"form-label\">Token</label>\n            <input type=\"number\" className=\"input-field\" value={queryToken} onChange={(e)=>setQueryToken(e.target.value)} />\n          </div>\n          <div className=\"flex items-end\">\n            <button className=\"btn-primary\" onClick={onQuery} disabled={queryLoading}>{queryLoading ? 'Searching...' : 'Search'}</button>\n          </div>\n        </div>\n\n        <div className=\"mt-4 overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Patient</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Token</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Subtotal</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Tax</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Total</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                <th className=\"px-6 py-3\"></th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {results.map(d => (\n                <tr key={d._id} className={selected?._id===d._id ? 'bg-primary-50' : ''}>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{d.patient?.firstName} {d.patient?.lastName}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{d.dailyToken ?? '-'}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{Number(d.subtotal).toFixed(2)}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{Number(d.tax).toFixed(2)}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{Number(d.total).toFixed(2)}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{d.paymentStatus}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-right\">\n                    <button className=\"btn-secondary\" onClick={()=>onSelect(d)}>Select</button>\n                  </td>\n                </tr>\n              ))}\n              {results.length === 0 && (\n                <tr>\n                  <td colSpan=\"6\" className=\"px-6 py-6 text-center text-gray-500\">No dispenses</td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Payment and Bill */}\n      {selected && (\n        <div className=\"card\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">Payment & Bill</h2>\n            <button className=\"btn-secondary\" onClick={()=>setSelected(null)}>Clear</button>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n            <div>\n              <label className=\"form-label\">Amount to pay</label>\n              <input type=\"number\" className=\"input-field\" value={payAmount} onChange={(e)=>setPayAmount(e.target.value)} />\n            </div>\n            <div className=\"flex items-end\">\n              <button className=\"btn-primary\" onClick={onPay}>Record Payment</button>\n            </div>\n            <div className=\"flex items-end\">\n              <button className=\"btn-secondary\" onClick={onPrint} disabled={!selected.billNumber && selected.paymentStatus!=='paid'}>Print Bill</button>\n            </div>\n          </div>\n\n          <div ref={billRef} className=\"bg-white p-4 rounded border\">\n            <h3 className=\"text-xl font-semibold mb-2\">Clinic Bill</h3>\n            <div className=\"text-sm text-gray-600 mb-4\">Bill No: {selected.billNumber || '(generated after payment)'} | Date: {new Date(selected.createdAt).toLocaleString()}</div>\n            <div className=\"mb-2\"><strong>Patient:</strong> {selected.patient?.firstName} {selected.patient?.lastName}</div>\n            <div className=\"mb-4\"><strong>Token:</strong> {selected.dailyToken ?? '-'} | <strong>Day:</strong> {selected.appointmentDay ? new Date(selected.appointmentDay).toLocaleDateString() : '-'}</div>\n            <table>\n              <thead>\n                <tr><th>Item</th><th>Qty</th><th>Unit Price</th><th>Amount</th></tr>\n              </thead>\n              <tbody>\n                {selected.items?.map((it, idx)=> (\n                  <tr key={idx}><td>{it.name}</td><td>{it.quantity}</td><td>{Number(it.unitPrice).toFixed(2)}</td><td>{(Number(it.quantity)*Number(it.unitPrice)).toFixed(2)}</td></tr>\n                ))}\n              </tbody>\n            </table>\n            <div className=\"text-right mt-4\">\n              <div>Subtotal: {Number(selected.subtotal).toFixed(2)}</div>\n              <div>Tax: {Number(selected.tax).toFixed(2)}</div>\n              <div className=\"font-semibold\">Total: {Number(selected.total).toFixed(2)}</div>\n              <div>Paid: {Number(selected.paidAmount||0).toFixed(2)}</div>\n              <div>Status: {selected.paymentStatus}</div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Dispensary;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}