{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kashif\\\\clinic management system antiG\\\\clinic-management-system\\\\frontend\\\\src\\\\pages\\\\Dispensary.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { dispensaryAPI, appointmentAPI, medicinesAPI, patientAPI } from '../services/api';\nimport toast from 'react-hot-toast';\nimport { Search, Plus, Trash, Printer, FileText, User, Calendar } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst emptyItem = {\n  name: '',\n  quantity: 1,\n  unitPrice: 0\n};\nconst Dispensary = () => {\n  _s();\n  var _reportStats$totalPen, _reportStats$totalRef, _selectedAppt$patient, _selectedAppt$patient2, _selectedAppt$doctor, _selectedAppt$doctor$, _selectedAppt$doctor2, _selectedAppt$doctor3, _selected$patient, _selected$patient2, _selected$patient3, _selected$dailyToken, _selected$items;\n  const [mode, setMode] = useState('today'); // 'today' | 'history' | 'direct' | 'past'\n  const [date, setDate] = useState('');\n  const [token, setToken] = useState('');\n  const [patientId, setPatientId] = useState('');\n  const [items, setItems] = useState([{\n    ...emptyItem\n  }]);\n  const [tax, setTax] = useState('0');\n  const [discount, setDiscount] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  // Patient Search\n  const [patientSearch, setPatientSearch] = useState('');\n  const [patientResults, setPatientResults] = useState([]);\n  const [showPatientDropdown, setShowPatientDropdown] = useState(false);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const [patientLoading, setPatientLoading] = useState(false);\n\n  // Medicine Search\n  const [searchIndex, setSearchIndex] = useState(null);\n  const [searchText, setSearchText] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [searchLoading, setSearchLoading] = useState(false);\n  const [queryDate, setQueryDate] = useState('');\n  const [queryToken, setQueryToken] = useState('');\n  const [queryPatientId, setQueryPatientId] = useState('');\n  const [results, setResults] = useState([]);\n  const [selected, setSelected] = useState(null);\n  const [payAmount, setPayAmount] = useState('');\n  const billRef = useRef(null);\n  const [queryLoading, setQueryLoading] = useState(false);\n\n  // Reports\n  const [reportStart, setReportStart] = useState(new Date().toISOString().slice(0, 10));\n  const [reportEnd, setReportEnd] = useState(new Date().toISOString().slice(0, 10));\n  const [reportStats, setReportStats] = useState({\n    totalBilled: 0,\n    totalCollected: 0,\n    count: 0\n  });\n  const [reportList, setReportList] = useState([]);\n  const [reportLoading, setReportLoading] = useState(false);\n\n  // Appointment filter/prefill\n  const todayStr = new Date().toISOString().slice(0, 10);\n  const [apptDate, setApptDate] = useState(todayStr);\n  const [apptStatus, setApptStatus] = useState('prescription dispensed'); // Default to show those ready for dispensing? Or 'completed'?\n  const [apptLoading, setApptLoading] = useState(false);\n  const [appointments, setAppointments] = useState([]);\n  const [selectedAppt, setSelectedAppt] = useState(null);\n\n  // Alternatives search by salt per item index\n  const [altIdx, setAltIdx] = useState(null);\n  const [altSalt, setAltSalt] = useState('');\n  const [altList, setAltList] = useState([]);\n  const [altLoading, setAltLoading] = useState(false);\n\n  // Patient Search Handler\n  const handlePatientSearch = async val => {\n    setPatientSearch(val);\n    if (val.length < 2) {\n      setPatientResults([]);\n      return;\n    }\n    try {\n      setPatientLoading(true);\n      // Use backend search\n      const res = await patientAPI.getAll({\n        search: val,\n        limit: 20\n      });\n      setPatientResults(res.data.data || []);\n      setShowPatientDropdown(true);\n    } catch (e) {\n      console.error(e);\n    } finally {\n      setPatientLoading(false);\n    }\n  };\n  const selectPatient = p => {\n    setSelectedPatient(p);\n    setPatientId(p._id);\n    setPatientSearch(`${p.firstName} ${p.lastName}`);\n    setShowPatientDropdown(false);\n\n    // If in past mode, set the query filter\n    if (mode === 'past') {\n      setQueryPatientId(p._id);\n    }\n  };\n\n  // Medicine Search Handler\n  const handleMedicineSearch = async (idx, val) => {\n    updateItem(idx, 'name', val);\n    setSearchIndex(idx);\n    setSearchText(val);\n    if (val.length < 2) {\n      setSearchResults([]);\n      return;\n    }\n    try {\n      setSearchLoading(true);\n      const res = await medicinesAPI.getAll({\n        search: val,\n        limit: 10\n      });\n      setSearchResults(res.data.data || []);\n    } catch (e) {\n      console.error(e);\n    } finally {\n      setSearchLoading(false);\n    }\n  };\n  const pickMedicine = m => {\n    if (searchIndex === null) return;\n    updateItem(searchIndex, 'name', m.name);\n    updateItem(searchIndex, 'strength', m.strength || '');\n    updateItem(searchIndex, 'form', m.form || '');\n    updateItem(searchIndex, 'unitPrice', m.sellingPrice || 0);\n    setSearchResults([]);\n    setSearchText('');\n    setSearchIndex(null);\n  };\n  const loadLatestPrescription = async () => {\n    if (!selectedPatient) return toast.error('Select a patient first');\n    try {\n      setLoading(true);\n      const res = await dispensaryAPI.prefill({\n        patientId: selectedPatient._id\n      });\n      const pre = res.data.data || [];\n      if (pre.length === 0) return toast('No recent prescription found');\n      setItems(pre.map(x => ({\n        name: x.name,\n        strength: x.strength || '',\n        form: x.form || '',\n        duration: x.duration || '',\n        quantity: x.quantity || 1,\n        unitPrice: x.unitPrice || 0,\n        notes: x.notes || '',\n        days: '',\n        doses: ''\n      })));\n      toast.success('Loaded latest prescription');\n    } catch (e) {\n      var _e$response, _e$response$data;\n      toast.error(((_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || 'Failed to load prescription');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const updateItem = (idx, field, value) => {\n    setItems(prev => prev.map((it, i) => i === idx ? {\n      ...it,\n      [field]: value\n    } : it));\n  };\n\n  // Auto-load today's scheduled appointments on mount\n  useEffect(() => {\n    onQueryAppointments();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Appointments search for chemist\n  const onQueryAppointments = async () => {\n    try {\n      setApptLoading(true);\n      const params = {};\n      if (apptDate) params.date = apptDate;\n      if (apptStatus) params.status = apptStatus;\n      const res = await appointmentAPI.getAll(params);\n      setAppointments(res.data.data || []);\n      setSelectedAppt(null);\n    } catch (e) {\n      var _e$response2, _e$response2$data;\n      const msg = ((_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message) || 'Failed to fetch appointments';\n      toast.error(msg);\n    } finally {\n      setApptLoading(false);\n    }\n  };\n  const onChooseAppointment = async appt => {\n    setSelectedAppt(appt);\n    setSelectedPatient(appt.patient); // Set selected patient context\n    try {\n      const res = await dispensaryAPI.prefill({\n        appointmentId: appt._id\n      });\n      const pre = res.data.data || [];\n      if (pre.length === 0) toast('No prescription found for this appointment');\n      setItems(pre.map(x => ({\n        name: x.name,\n        strength: x.strength || '',\n        form: x.form || '',\n        duration: x.duration || '',\n        quantity: x.quantity || 1,\n        unitPrice: x.unitPrice || 0,\n        notes: x.notes || ''\n      })));\n\n      // Auto-switch to dispense creation view if we want, or stay in list?\n      // Let's scroll to top or just set mode to 'today' (already is) and populate form\n      setDate(appt.appointmentDay ? new Date(appt.appointmentDay).toISOString().slice(0, 10) : '');\n      setToken(appt.dailyToken || '');\n      setPatientId(appt.patient._id);\n    } catch (e) {\n      var _e$response3, _e$response3$data;\n      const msg = ((_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : _e$response3$data.message) || 'Failed to prefill from prescription';\n      toast.error(msg);\n    }\n  };\n\n  // Alternatives by salt\n  const onSearchAlternatives = async idx => {\n    try {\n      if (!altSalt) return toast.error('Enter salt to search alternatives');\n      setAltLoading(true);\n      setAltIdx(idx);\n      const res = await medicinesAPI.getAll({\n        salt: altSalt,\n        limit: 10\n      });\n      setAltList(res.data.data || []);\n    } catch (e) {\n      setAltList([]);\n    } finally {\n      setAltLoading(false);\n    }\n  };\n  const onPickAlternative = m => {\n    if (altIdx === null) return;\n    updateItem(altIdx, 'name', m.name || '');\n    updateItem(altIdx, 'unitPrice', m.sellingPrice || 0);\n    setAltIdx(null);\n    setAltSalt('');\n    setAltList([]);\n  };\n  const addItem = () => setItems(prev => [...prev, {\n    ...emptyItem\n  }]);\n  const removeItem = idx => setItems(prev => prev.filter((_, i) => i !== idx));\n  const computeSubtotal = () => items.reduce((sum, it) => sum + Number(it.quantity || 0) * Number(it.unitPrice || 0), 0);\n  const subtotal = computeSubtotal();\n  const total = subtotal + Number(tax || 0);\n\n  // Quantity helpers\n  const setDays = (idx, days) => {\n    updateItem(idx, 'days', days);\n    const qty = Number(days || 0) * Number(items[idx].doses || 0 || 1);\n    updateItem(idx, 'quantity', qty);\n  };\n  const setDoses = (idx, doses) => {\n    updateItem(idx, 'doses', doses);\n    const qty = Number(doses || 0) * Number(items[idx].days || 0 || 1);\n    updateItem(idx, 'quantity', qty);\n  };\n  const onEditDispense = d => {\n    setSelected(d);\n    setItems(d.items.map(i => ({\n      ...i,\n      unitPrice: i.unitPrice,\n      stock: 999\n    })));\n    setTax(d.tax || '');\n    setDiscount(d.discount || '');\n    setMode('direct');\n    // We use 'direct' mode UI for editing, but we need to know we are editing 'selected'\n    // The save function will check if 'selected' exists and has an ID\n  };\n  const onCancelDispense = async d => {\n    if (!window.confirm('Are you sure you want to cancel this dispense? Items will be returned to stock.')) return;\n    try {\n      const res = await dispensaryAPI.cancelDispense(d._id);\n      if (res.data.success) {\n        toast.success('Dispense cancelled');\n        onQuery(); // Refresh list\n        if ((selected === null || selected === void 0 ? void 0 : selected._id) === d._id) setSelected(null);\n      }\n    } catch (e) {\n      var _e$response4, _e$response4$data, _e$response5, _e$response5$data;\n      console.error('Cancel error:', e);\n      const msg = ((_e$response4 = e.response) === null || _e$response4 === void 0 ? void 0 : (_e$response4$data = _e$response4.data) === null || _e$response4$data === void 0 ? void 0 : _e$response4$data.message) || ((_e$response5 = e.response) !== null && _e$response5 !== void 0 && (_e$response5$data = _e$response5.data) !== null && _e$response5$data !== void 0 && _e$response5$data.errors ? JSON.stringify(e.response.data.errors) : e.message) || 'Error cancelling dispense';\n      toast.error(msg);\n    }\n  };\n  const onSaveDispense = async () => {\n    if (items.length === 0) return toast.error('No items to dispense');\n    const payload = {\n      items: items.map(i => ({\n        name: i.name,\n        quantity: i.quantity,\n        unitPrice: i.unitPrice,\n        strength: i.strength,\n        form: i.form,\n        duration: i.duration,\n        notes: i.notes\n      })),\n      tax: Number(tax || 0),\n      discount: Number(discount || 0)\n    };\n    try {\n      setLoading(true);\n      if (selected && selected._id && mode === 'direct') {\n        // Update existing\n        const res = await dispensaryAPI.updateDispense(selected._id, payload);\n        if (res.data.success) {\n          toast.success('Dispense updated');\n          setSelected(res.data.data);\n          // Auto-fill refund if applicable?\n          const newTotal = res.data.data.total;\n          const paid = res.data.data.paidAmount || 0;\n          if (paid > newTotal) {\n            setPayAmount((newTotal - paid).toFixed(2)); // Negative amount for refund\n            toast('Refund due: ' + (paid - newTotal).toFixed(2), {\n              icon: 'ℹ️'\n            });\n          }\n        }\n      } else {\n        // Create new\n        if (mode === 'today' && selectedAppt) {\n          payload.date = selectedAppt.appointmentDay;\n          payload.token = selectedAppt.dailyToken;\n        } else if (selectedPatient) {\n          payload.patient = selectedPatient._id;\n        } else if (mode === 'token') {\n          // Legacy support if needed, or remove\n          if (!date || !token) return toast.error('Provide date and token');\n          payload.date = date;\n          payload.token = Number(token);\n        } else {\n          return toast.error('No patient selected');\n        }\n        const res = await dispensaryAPI.create(payload);\n        toast.success('Dispense created');\n        try {\n          // ensure we have full object\n          if (res.data && res.data.data) {\n            setSelected(res.data.data);\n          }\n        } catch (_) {}\n\n        // Reset form\n        setItems([{\n          ...emptyItem\n        }]);\n        setTax('0');\n        setDiscount('');\n        if (mode === 'today') {\n          onQueryAppointments();\n        }\n      }\n    } catch (e) {\n      var _e$response6, _e$response6$data, _e$response7, _e$response7$data;\n      console.error('Save dispense error:', e);\n      const msg = ((_e$response6 = e.response) === null || _e$response6 === void 0 ? void 0 : (_e$response6$data = _e$response6.data) === null || _e$response6$data === void 0 ? void 0 : _e$response6$data.message) || ((_e$response7 = e.response) !== null && _e$response7 !== void 0 && (_e$response7$data = _e$response7.data) !== null && _e$response7$data !== void 0 && _e$response7$data.errors ? JSON.stringify(e.response.data.errors) : e.message) || 'Failed to save dispense';\n      toast.error(msg);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const onSelect = d => {\n    setSelected(d);\n    setPayAmount('');\n  };\n  const onPay = async () => {\n    if (!(selected !== null && selected !== void 0 && selected._id)) return toast.error('Select a dispense first');\n    if (!payAmount || Number(payAmount) === 0) return toast.error('Enter valid amount');\n    try {\n      const res = await dispensaryAPI.pay(selected._id, {\n        amount: Number(payAmount)\n      });\n      toast.success('Payment recorded');\n      setSelected(res.data.data);\n      // refresh list entry\n      setResults(prev => prev.map(x => x._id === res.data.data._id ? res.data.data : x));\n      setPayAmount('');\n    } catch (e) {\n      var _e$response8, _e$response8$data, _e$response9, _e$response9$data;\n      console.error('Payment error:', e);\n      const msg = ((_e$response8 = e.response) === null || _e$response8 === void 0 ? void 0 : (_e$response8$data = _e$response8.data) === null || _e$response8$data === void 0 ? void 0 : _e$response8$data.message) || ((_e$response9 = e.response) !== null && _e$response9 !== void 0 && (_e$response9$data = _e$response9.data) !== null && _e$response9$data !== void 0 && _e$response9$data.errors ? JSON.stringify(e.response.data.errors) : e.message) || 'Payment failed';\n      toast.error(msg);\n    }\n  };\n  const onPrint = () => {\n    if (!billRef.current) return;\n    const printContents = billRef.current.innerHTML;\n    const win = window.open('', '', 'width=800,height=600');\n    win.document.write('<html><head><title>Bill</title>');\n    win.document.write(`\n      <style>\n        body { font-family: 'Inter', sans-serif; padding: 40px; color: #1f2937; }\n        .text-center { text-align: center; }\n        .text-right { text-align: right; }\n        .font-bold { font-weight: bold; }\n        .text-sm { font-size: 0.875rem; }\n        .text-xs { font-size: 0.75rem; }\n        .text-gray-500 { color: #6b7280; }\n        .mb-6 { margin-bottom: 1.5rem; }\n        .flex { display: flex; }\n        .justify-between { justify-content: space-between; }\n        table { width: 100%; border-collapse: collapse; margin-bottom: 1.5rem; }\n        th { text-align: left; padding: 0.5rem; border-bottom: 2px solid #e5e7eb; color: #4b5563; font-weight: 600; }\n        td { padding: 0.5rem; border-bottom: 1px solid #f3f4f6; }\n        th.text-right, td.text-right { text-align: right; }\n        th.text-center, td.text-center { text-align: center; }\n        .border-t { border-top: 1px solid #e5e7eb; }\n        .pt-2 { padding-top: 0.5rem; }\n        .w-48 { width: 12rem; }\n        .space-y-2 > * + * { margin-top: 0.5rem; }\n      </style>\n    `);\n    win.document.write('</head><body>');\n    win.document.write(printContents);\n    win.document.write('</body></html>');\n    win.document.close();\n    win.focus();\n    win.print();\n    win.close();\n  };\n  const onQuery = async () => {\n    try {\n      setQueryLoading(true);\n      const params = {};\n\n      // If reports mode, use date range\n      if (mode === 'reports') {\n        params.startDate = reportStart;\n        params.endDate = reportEnd;\n      } else {\n        if (queryPatientId) params.patientId = queryPatientId;\n        if (queryDate && queryToken) {\n          params.date = queryDate;\n          params.token = queryToken;\n        }\n        if (!params.patientId && !params.date) return toast.error('Provide patientId or date+token');\n      }\n      const res = await dispensaryAPI.getAll(params);\n      if (mode === 'reports') {\n        setReportList(res.data.data || []);\n      } else {\n        setResults(res.data.data || []);\n      }\n      setSelected(null);\n    } catch (e) {\n      var _e$response0, _e$response0$data;\n      const msg = ((_e$response0 = e.response) === null || _e$response0 === void 0 ? void 0 : (_e$response0$data = _e$response0.data) === null || _e$response0$data === void 0 ? void 0 : _e$response0$data.message) || 'Failed to fetch dispenses';\n      toast.error(msg);\n      console.error('Query dispenses error:', e);\n    } finally {\n      setQueryLoading(false);\n    }\n  };\n  const onGenerateReport = async () => {\n    try {\n      setReportLoading(true);\n      // Fetch stats\n      const statsRes = await dispensaryAPI.getStats({\n        startDate: reportStart,\n        endDate: reportEnd\n      });\n      setReportStats(statsRes.data.data);\n      // Fetch list\n      onQuery();\n    } catch (e) {\n      toast.error('Failed to generate report');\n    } finally {\n      setReportLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6 max-w-6xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold text-gray-900\",\n        children: \"Dispensary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-2 bg-gray-100 p-1 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setMode('today'),\n          className: `px-4 py-2 rounded-md text-sm font-medium transition-colors ${mode === 'today' ? 'bg-white text-blue-600 shadow' : 'text-gray-600 hover:text-gray-900'}`,\n          children: \"Today's Visits\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setMode('history'),\n          className: `px-4 py-2 rounded-md text-sm font-medium transition-colors ${mode === 'history' ? 'bg-white text-blue-600 shadow' : 'text-gray-600 hover:text-gray-900'}`,\n          children: \"Patient History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setMode('direct'),\n          className: `px-4 py-2 rounded-md text-sm font-medium transition-colors ${mode === 'direct' ? 'bg-white text-blue-600 shadow' : 'text-gray-600 hover:text-gray-900'}`,\n          children: \"Direct Dispense\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setMode('past'),\n          className: `px-4 py-2 rounded-md text-sm font-medium transition-colors ${mode === 'past' ? 'bg-white text-blue-600 shadow' : 'text-gray-600 hover:text-gray-900'}`,\n          children: \"Past Dispenses\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setMode('reports'),\n          className: `px-4 py-2 rounded-md text-sm font-medium transition-colors ${mode === 'reports' ? 'bg-white text-blue-600 shadow' : 'text-gray-600 hover:text-gray-900'}`,\n          children: \"Reports\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 7\n    }, this), mode === 'today' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-gray-900\",\n          children: \"Scheduled Appointments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            className: \"input-field w-auto\",\n            value: apptDate,\n            onChange: e => setApptDate(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"input-field w-auto\",\n            value: apptStatus,\n            onChange: e => setApptStatus(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"All Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"scheduled\",\n              children: \"Scheduled\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"completed\",\n              children: \"Completed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"prescription dispensed\",\n              children: \"Dispensed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-secondary\",\n            onClick: onQueryAppointments,\n            disabled: apptLoading,\n            children: \"Refresh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full divide-y divide-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-50\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",\n                children: \"Patient\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",\n                children: \"Token\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 511,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"bg-white divide-y divide-gray-200\",\n            children: [appointments.map(a => {\n              var _a$patient, _a$patient2, _a$patient3;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: (selectedAppt === null || selectedAppt === void 0 ? void 0 : selectedAppt._id) === a._id ? 'bg-blue-50' : '',\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm text-gray-900\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"font-medium\",\n                    children: [(_a$patient = a.patient) === null || _a$patient === void 0 ? void 0 : _a$patient.firstName, \" \", (_a$patient2 = a.patient) === null || _a$patient2 === void 0 ? void 0 : _a$patient2.lastName]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 518,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-gray-500\",\n                    children: (_a$patient3 = a.patient) === null || _a$patient3 === void 0 ? void 0 : _a$patient3.phone\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 519,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 517,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm text-gray-900\",\n                  children: typeof a.dailyToken !== 'undefined' ? a.dailyToken : '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 521,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `px-2 py-1 rounded-full text-xs ${a.status === 'prescription dispensed' ? 'bg-green-100 text-green-800' : a.status === 'completed' ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-800'}`,\n                    children: a.status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 523,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-right\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-sm btn-secondary\",\n                    onClick: () => onChooseAppointment(a),\n                    children: \"Select\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 528,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 527,\n                  columnNumber: 21\n                }, this)]\n              }, a._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 19\n              }, this);\n            }), appointments.length === 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"4\",\n                className: \"px-4 py-4 text-center text-gray-500\",\n                children: \"No appointments found\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 51\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 47\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 9\n    }, this), (mode === 'history' || mode === 'direct' || mode === 'past') && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold text-gray-900 mb-4\",\n        children: \"Select Patient\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",\n          children: /*#__PURE__*/_jsxDEV(Search, {\n            className: \"h-5 w-5 text-gray-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"input-field pl-10\",\n          placeholder: \"Search patient by name or phone...\",\n          value: patientSearch,\n          onChange: e => handlePatientSearch(e.target.value),\n          onFocus: () => setShowPatientDropdown(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 13\n        }, this), showPatientDropdown && patientResults.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute z-10 w-full mt-1 bg-white border rounded-md shadow-lg max-h-60 overflow-auto\",\n          children: patientResults.map(p => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"w-full text-left px-4 py-2 hover:bg-gray-50 border-b last:border-b-0\",\n            onClick: () => selectPatient(p),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-medium text-gray-900\",\n              children: [p.firstName, \" \", p.lastName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-500\",\n              children: [\"Ph: \", p.phone, \" | Reg: \", p.regNo]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 565,\n              columnNumber: 21\n            }, this)]\n          }, p._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 559,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 15\n        }, this), patientLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute right-3 top-2 text-sm text-gray-400\",\n          children: \"Searching...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 32\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 11\n      }, this), selectedPatient && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 p-3 bg-blue-50 rounded-md border border-blue-100 flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-medium text-blue-900\",\n            children: [selectedPatient.firstName, \" \", selectedPatient.lastName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-blue-700\",\n            children: selectedPatient.phone\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 15\n        }, this), mode === 'history' && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-secondary flex items-center gap-2\",\n          onClick: loadLatestPrescription,\n          disabled: loading,\n          children: [/*#__PURE__*/_jsxDEV(FileText, {\n            className: \"h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 581,\n            columnNumber: 19\n          }, this), \"Load Latest Prescription\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 580,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 541,\n      columnNumber: 9\n    }, this), (mode === 'today' || mode === 'history' || mode === 'direct') && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-gray-900\",\n          children: \"Dispense Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 594,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-500\",\n          children: mode === 'token' ? `Token: ${token || '-'}` : selectedPatient ? `Patient: ${selectedPatient.firstName}` : 'No patient selected'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [items.map((it, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 border rounded-lg bg-gray-50 relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-12 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-4 relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Medicine\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 605,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input-field\",\n                placeholder: \"Type to search...\",\n                value: it.name,\n                onChange: e => handleMedicineSearch(idx, e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 21\n              }, this), searchIndex === idx && searchText && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute z-50 w-full mt-1 border rounded bg-white max-h-40 overflow-auto shadow-lg\",\n                children: [searchLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-2 text-sm text-gray-500\",\n                  children: \"Searching...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 614,\n                  columnNumber: 43\n                }, this), !searchLoading && searchResults.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-2 text-sm text-gray-500\",\n                  children: \"No matches\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 615,\n                  columnNumber: 76\n                }, this), searchResults.map(r => /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"block w-full text-left px-3 py-2 hover:bg-gray-50\",\n                  onClick: () => pickMedicine(r),\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"font-medium\",\n                    children: r.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 618,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-gray-500\",\n                    children: [r.strength, \" \", r.form, \" \\u2022 Rs.\", r.sellingPrice]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 619,\n                    columnNumber: 29\n                  }, this)]\n                }, r._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 617,\n                  columnNumber: 27\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 613,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 604,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Strength\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 626,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input-field\",\n                value: it.strength || '',\n                onChange: e => updateItem(idx, 'strength', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 627,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 625,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Qty\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 630,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                className: \"input-field\",\n                value: it.quantity,\n                onChange: e => updateItem(idx, 'quantity', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 631,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 634,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                className: \"input-field\",\n                value: it.unitPrice,\n                onChange: e => updateItem(idx, 'unitPrice', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 635,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 633,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2 flex items-end justify-end\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-medium text-gray-900\",\n                children: (Number(it.quantity || 0) * Number(it.unitPrice || 0)).toFixed(2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 638,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 637,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 603,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-12 gap-4 mt-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Instructions/Notes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 644,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input-field\",\n                value: it.notes || '',\n                onChange: e => updateItem(idx, 'notes', e.target.value),\n                placeholder: \"Dosage instructions...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 643,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-4 flex items-end gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input-field\",\n                placeholder: \"Search Alt (Salt)\",\n                value: altIdx === idx ? altSalt : '',\n                onChange: e => {\n                  setAltIdx(idx);\n                  setAltSalt(e.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-secondary whitespace-nowrap\",\n                onClick: () => onSearchAlternatives(idx),\n                children: \"Find Alt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 649,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 647,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2 flex items-end justify-end\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"text-red-600 hover:text-red-800 p-2\",\n                onClick: () => removeItem(idx),\n                children: /*#__PURE__*/_jsxDEV(Trash, {\n                  className: \"h-5 w-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 652,\n                  columnNumber: 109\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 652,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 642,\n            columnNumber: 17\n          }, this), altIdx === idx && (altList.length > 0 || altLoading) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 border rounded p-2 bg-white\",\n            children: [altLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-500\",\n              children: \"Searching alternatives...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 658,\n              columnNumber: 36\n            }, this), altList.map(m => /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"block w-full text-left px-3 py-1 hover:bg-gray-50 flex justify-between\",\n              onClick: () => onPickAlternative(m),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [m.name, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-500 text-xs\",\n                  children: [\"(\", m.strength, \" \", m.form, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 661,\n                  columnNumber: 40\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 661,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: [\"Rs. \", Number(m.sellingPrice || 0).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 662,\n                columnNumber: 25\n              }, this)]\n            }, m._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 660,\n              columnNumber: 23\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 19\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-secondary w-full py-3 border-dashed border-2 flex justify-center items-center gap-2\",\n          onClick: addItem,\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            className: \"h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 671,\n            columnNumber: 15\n          }, this), \" Add Item\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 670,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 border-t pt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-y-1 flex-col items-end\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-4 text-gray-600\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Subtotal:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 678,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium w-24 text-right\",\n              children: subtotal.toFixed(2)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 679,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 677,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-4 items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600\",\n              children: \"Tax:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 682,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              className: \"input-field w-24 text-right py-1\",\n              value: tax,\n              onChange: e => setTax(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 683,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-4 items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600\",\n              children: \"Discount:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 686,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              className: \"input-field w-24 text-right py-1\",\n              value: discount,\n              onChange: e => setDiscount(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 687,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 685,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-4 text-lg font-bold text-gray-900 mt-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Total:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"w-24 text-right\",\n              children: (subtotal + Number(tax || 0) - Number(discount || 0)).toFixed(2)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 691,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 676,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 flex justify-end\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary px-8\",\n            onClick: onSaveDispense,\n            disabled: loading,\n            children: loading ? 'Processing...' : selected && selected._id && mode === 'direct' ? 'Update Dispense' : 'Create Dispense & Bill'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 695,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 675,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 9\n    }, this), mode === 'past' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold text-gray-900 mb-4\",\n        children: \"Search Past Dispenses\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 707,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-4 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Patient\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 711,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"input-field bg-gray-100\",\n            value: selectedPatient ? `${selectedPatient.firstName} ${selectedPatient.lastName}` : queryPatientId || '',\n            readOnly: true,\n            placeholder: \"Search above...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 712,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 710,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 715,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            className: \"input-field\",\n            value: queryDate,\n            onChange: e => setQueryDate(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 716,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 714,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Token\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 719,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            className: \"input-field\",\n            value: queryToken,\n            onChange: e => setQueryToken(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-end\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary\",\n            onClick: onQuery,\n            disabled: queryLoading,\n            children: queryLoading ? 'Searching...' : 'Search Records'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 723,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 722,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 708,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full divide-y divide-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-50\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",\n                children: \"Patient\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 731,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",\n                children: \"Date/Token\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 732,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",\n                children: \"Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 733,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 734,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 735,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 730,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 729,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"bg-white divide-y divide-gray-200\",\n            children: [results.map(d => {\n              var _d$patient, _d$patient2, _d$dailyToken;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: (selected === null || selected === void 0 ? void 0 : selected._id) === d._id ? 'bg-blue-50' : '',\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm text-gray-900\",\n                  children: [(_d$patient = d.patient) === null || _d$patient === void 0 ? void 0 : _d$patient.firstName, \" \", (_d$patient2 = d.patient) === null || _d$patient2 === void 0 ? void 0 : _d$patient2.lastName]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 741,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm text-gray-900\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: d.appointmentDay ? new Date(d.appointmentDay).toLocaleDateString() : '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 743,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-gray-500\",\n                    children: [\"Token: \", (_d$dailyToken = d.dailyToken) !== null && _d$dailyToken !== void 0 ? _d$dailyToken : '-']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 744,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 742,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm text-gray-900\",\n                  children: Number(d.total).toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 746,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-sm\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `px-2 py-1 rounded-full text-xs ${d.paymentStatus === 'paid' ? 'bg-green-100 text-green-800' : d.paymentStatus === 'cancelled' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'}`,\n                    children: d.paymentStatus\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 748,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 747,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 text-right space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-sm btn-secondary\",\n                    onClick: () => onEditDispense(d),\n                    disabled: d.paymentStatus === 'cancelled',\n                    children: \"Edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 753,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-sm btn-danger text-red-600 hover:text-red-800\",\n                    onClick: () => onCancelDispense(d),\n                    disabled: d.paymentStatus === 'cancelled',\n                    children: \"Cancel\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 754,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-sm btn-secondary\",\n                    onClick: () => onSelect(d),\n                    children: \"View Bill\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 755,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 752,\n                  columnNumber: 21\n                }, this)]\n              }, d._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 740,\n                columnNumber: 19\n              }, this);\n            }), results.length === 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"5\",\n                className: \"px-4 py-4 text-center text-gray-500\",\n                children: \"No records found\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 759,\n                columnNumber: 46\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 759,\n              columnNumber: 42\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 738,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 728,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 727,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 706,\n      columnNumber: 9\n    }, this), mode === 'reports' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-gray-900 mb-4\",\n          children: \"Financial Reports\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 770,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-4 items-end\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"From Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 773,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              className: \"input-field\",\n              value: reportStart,\n              onChange: e => setReportStart(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 774,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 772,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"To Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 777,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              className: \"input-field\",\n              value: reportEnd,\n              onChange: e => setReportEnd(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 778,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 776,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary\",\n            onClick: onGenerateReport,\n            disabled: reportLoading,\n            children: \"Generate Report\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 780,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 771,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 769,\n        columnNumber: 11\n      }, this), !reportLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white p-6 rounded-lg shadow border-l-4 border-blue-500\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm font-medium text-gray-500 uppercase\",\n            children: \"Total Sales (Billed)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 787,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 text-3xl font-bold text-gray-900\",\n            children: [\"Rs. \", reportStats.totalBilled.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 788,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500 mt-1\",\n            children: [reportStats.count, \" Transactions\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 789,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 786,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white p-6 rounded-lg shadow border-l-4 border-green-500\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm font-medium text-gray-500 uppercase\",\n            children: \"Total Collected (Settled)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 792,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 text-3xl font-bold text-gray-900\",\n            children: [\"Rs. \", reportStats.totalCollected.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 793,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500 mt-1\",\n            children: \"Net Received\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 794,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 791,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white p-6 rounded-lg shadow border-l-4 border-orange-500\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm font-medium text-gray-500 uppercase\",\n            children: \"Total Pending\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 797,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 text-3xl font-bold text-gray-900\",\n            children: [\"Rs. \", ((_reportStats$totalPen = reportStats.totalPending) === null || _reportStats$totalPen === void 0 ? void 0 : _reportStats$totalPen.toFixed(2)) || '0.00']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 798,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500 mt-1\",\n            children: \"To be collected\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 799,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 796,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white p-6 rounded-lg shadow border-l-4 border-red-500\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm font-medium text-gray-500 uppercase\",\n            children: \"Total Refunds\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 802,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 text-3xl font-bold text-gray-900\",\n            children: [\"Rs. \", ((_reportStats$totalRef = reportStats.totalRefunds) === null || _reportStats$totalRef === void 0 ? void 0 : _reportStats$totalRef.toFixed(2)) || '0.00']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 803,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500 mt-1\",\n            children: \"To be returned\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 804,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 801,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 785,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-900 mb-4\",\n          children: \"Detailed Transactions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 810,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full divide-y divide-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-50\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",\n                  children: \"Date\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 815,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",\n                  children: \"Patient\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 816,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",\n                  children: \"Type\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 817,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",\n                  children: \"Billed\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 818,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",\n                  children: \"Paid\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 819,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\",\n                  children: \"Balance\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 820,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 814,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 813,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"bg-white divide-y divide-gray-200\",\n              children: [reportList.map(d => {\n                var _d$patient3, _d$patient4;\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"hover:bg-gray-50\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-4 py-2 text-sm text-gray-900\",\n                    children: [new Date(d.createdAt).toLocaleDateString(), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-xs text-gray-500\",\n                      children: new Date(d.createdAt).toLocaleTimeString()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 826,\n                      columnNumber: 116\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 826,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-4 py-2 text-sm text-gray-900\",\n                    children: [(_d$patient3 = d.patient) === null || _d$patient3 === void 0 ? void 0 : _d$patient3.firstName, \" \", (_d$patient4 = d.patient) === null || _d$patient4 === void 0 ? void 0 : _d$patient4.lastName]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 827,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-4 py-2 text-sm\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `px-2 py-1 rounded-full text-xs ${d.paymentStatus === 'paid' ? 'bg-green-100 text-green-800' : d.paymentStatus === 'cancelled' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'}`,\n                      children: d.paymentStatus\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 829,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 828,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-4 py-2 text-sm text-gray-900\",\n                    children: Number(d.total).toFixed(2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 833,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-4 py-2 text-sm text-gray-900\",\n                    children: Number(d.paidAmount || 0).toFixed(2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 834,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-4 py-2 text-sm font-medium text-gray-900\",\n                    children: (Number(d.total) - Number(d.paidAmount || 0)).toFixed(2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 835,\n                    columnNumber: 23\n                  }, this)]\n                }, d._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 825,\n                  columnNumber: 21\n                }, this);\n              }), reportList.length === 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: /*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: \"6\",\n                  className: \"px-4 py-4 text-center text-gray-500\",\n                  children: \"No transactions in this period\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 838,\n                  columnNumber: 51\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 838,\n                columnNumber: 47\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 823,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 812,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 811,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 809,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 768,\n      columnNumber: 9\n    }, this), selectedAppt && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-gray-900 mb-2\",\n        children: \"Selected Appointment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 850,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Patient:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 852,\n            columnNumber: 20\n          }, this), \" \", (_selectedAppt$patient = selectedAppt.patient) === null || _selectedAppt$patient === void 0 ? void 0 : _selectedAppt$patient.firstName, \" \", (_selectedAppt$patient2 = selectedAppt.patient) === null || _selectedAppt$patient2 === void 0 ? void 0 : _selectedAppt$patient2.lastName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 852,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Doctor:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 853,\n            columnNumber: 20\n          }, this), \" Dr. \", (_selectedAppt$doctor = selectedAppt.doctor) === null || _selectedAppt$doctor === void 0 ? void 0 : (_selectedAppt$doctor$ = _selectedAppt$doctor.user) === null || _selectedAppt$doctor$ === void 0 ? void 0 : _selectedAppt$doctor$.firstName, \" \", (_selectedAppt$doctor2 = selectedAppt.doctor) === null || _selectedAppt$doctor2 === void 0 ? void 0 : (_selectedAppt$doctor3 = _selectedAppt$doctor2.user) === null || _selectedAppt$doctor3 === void 0 ? void 0 : _selectedAppt$doctor3.lastName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 853,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Token:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 854,\n            columnNumber: 20\n          }, this), \" \", typeof selectedAppt.dailyToken !== 'undefined' ? selectedAppt.dailyToken : '-']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 854,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Date:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 855,\n            columnNumber: 20\n          }, this), \" \", selectedAppt.appointmentDate ? new Date(selectedAppt.appointmentDate).toLocaleDateString() : '-']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 855,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Status:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 856,\n            columnNumber: 20\n          }, this), \" \", selectedAppt.status]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 856,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 851,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 849,\n      columnNumber: 11\n    }, this), selected && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card border-t-4 border-blue-500\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-bold text-gray-900\",\n            children: \"Invoice & Payment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 868,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: \"Manage payment and print bill for this dispense\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 869,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 867,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"text-gray-400 hover:text-gray-600\",\n          onClick: () => setSelected(null),\n          children: /*#__PURE__*/_jsxDEV(Trash, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 871,\n            columnNumber: 103\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 871,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 866,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `bg-gray-50 p-4 rounded-lg ${Number(selected.paidAmount || 0) > Number(selected.total) ? 'border-l-4 border-orange-500' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"text-xs font-semibold text-gray-500 uppercase tracking-wider\",\n            children: Number(selected.paidAmount || 0) > Number(selected.total) ? 'Refund Due' : 'Amount Due'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 876,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `text-2xl font-bold mt-1 ${Number(selected.paidAmount || 0) > Number(selected.total) ? 'text-orange-600' : 'text-gray-900'}`,\n            children: [\"Rs. \", Math.abs(Number(selected.total) - Number(selected.paidAmount || 0)).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 879,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500 mt-1\",\n            children: [\"Total: \", Number(selected.total).toFixed(2), \" | Paid: \", Number(selected.paidAmount || 0).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 882,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 875,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-2 flex items-end gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-grow\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Payment Amount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 887,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                className: \"input-field\",\n                value: payAmount,\n                onChange: e => setPayAmount(e.target.value),\n                placeholder: \"Enter amount...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 889,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-primary whitespace-nowrap\",\n                onClick: onPay,\n                children: \"Record Payment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 890,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 888,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 886,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-secondary h-[42px] flex items-center gap-2\",\n              onClick: onPrint,\n              disabled: !selected.billNumber && selected.paymentStatus !== 'paid',\n              children: [/*#__PURE__*/_jsxDEV(Printer, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 895,\n                columnNumber: 21\n              }, this), \" Print Bill\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 894,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 893,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 885,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 874,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border rounded-lg overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-100 px-4 py-2 border-b font-medium text-gray-700\",\n          children: \"Bill Preview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 902,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: billRef,\n          className: \"bg-white p-8\",\n          id: \"printable-bill\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold text-gray-900\",\n              children: \"CLINIC NAME\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 905,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-500\",\n              children: \"123 Health Street, Medical District\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 906,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-500\",\n              children: \"Phone: (123) 456-7890\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 907,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 904,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between mb-6 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-gray-500\",\n                children: \"Bill To:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 912,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-bold text-gray-900\",\n                children: [(_selected$patient = selected.patient) === null || _selected$patient === void 0 ? void 0 : _selected$patient.firstName, \" \", (_selected$patient2 = selected.patient) === null || _selected$patient2 === void 0 ? void 0 : _selected$patient2.lastName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 913,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: (_selected$patient3 = selected.patient) === null || _selected$patient3 === void 0 ? void 0 : _selected$patient3.phone\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 914,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 911,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-right\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-gray-500\",\n                children: \"Bill Details:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 917,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"No:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 918,\n                  columnNumber: 26\n                }, this), \" \", selected.billNumber || 'Pending']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 918,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Date:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 919,\n                  columnNumber: 26\n                }, this), \" \", new Date(selected.createdAt).toLocaleDateString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 919,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Token:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 920,\n                  columnNumber: 26\n                }, this), \" \", (_selected$dailyToken = selected.dailyToken) !== null && _selected$dailyToken !== void 0 ? _selected$dailyToken : '-']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 920,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 916,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 910,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"w-full mb-6 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"border-b-2 border-gray-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"text-left py-2 font-semibold text-gray-600\",\n                  children: \"Item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 927,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"text-center py-2 font-semibold text-gray-600\",\n                  children: \"Qty\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 928,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"text-right py-2 font-semibold text-gray-600\",\n                  children: \"Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 929,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"text-right py-2 font-semibold text-gray-600\",\n                  children: \"Amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 930,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 926,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 925,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"divide-y divide-gray-100\",\n              children: (_selected$items = selected.items) === null || _selected$items === void 0 ? void 0 : _selected$items.map((it, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"font-medium text-gray-900\",\n                    children: it.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 937,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-gray-500\",\n                    children: [it.strength, \" \", it.form]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 938,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 936,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"text-center py-2\",\n                  children: it.quantity\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 940,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"text-right py-2\",\n                  children: Number(it.unitPrice).toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 941,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"text-right py-2\",\n                  children: (Number(it.quantity) * Number(it.unitPrice)).toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 942,\n                  columnNumber: 25\n                }, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 935,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 933,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 924,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-48 space-y-2 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-gray-600\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Subtotal:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 951,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: Number(selected.subtotal).toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 952,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 950,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-gray-600\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Tax:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 955,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: Number(selected.tax).toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 956,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 954,\n                columnNumber: 21\n              }, this), selected.discount > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-gray-600\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Discount:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 960,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"-\", Number(selected.discount).toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 961,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 959,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between font-bold text-lg text-gray-900 border-t pt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Total:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 965,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: Number(selected.total).toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 966,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 964,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-gray-600 pt-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Paid:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 969,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: Number(selected.paidAmount || 0).toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 970,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 968,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between font-medium text-gray-900 border-t pt-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Balance:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 973,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: Math.max(0, Number(selected.total) - Number(selected.paidAmount || 0)).toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 974,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 972,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 949,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 948,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-8 text-center text-xs text-gray-400\",\n            children: \"Thank you for your visit. Get well soon!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 979,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 903,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 901,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 865,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 450,\n    columnNumber: 5\n  }, this);\n};\n_s(Dispensary, \"xxlMaiCyv08TxDfU3yqsL0sUZNE=\");\n_c = Dispensary;\nexport default Dispensary;\nvar _c;\n$RefreshReg$(_c, \"Dispensary\");","map":{"version":3,"names":["React","useEffect","useRef","useState","dispensaryAPI","appointmentAPI","medicinesAPI","patientAPI","toast","Search","Plus","Trash","Printer","FileText","User","Calendar","jsxDEV","_jsxDEV","emptyItem","name","quantity","unitPrice","Dispensary","_s","_reportStats$totalPen","_reportStats$totalRef","_selectedAppt$patient","_selectedAppt$patient2","_selectedAppt$doctor","_selectedAppt$doctor$","_selectedAppt$doctor2","_selectedAppt$doctor3","_selected$patient","_selected$patient2","_selected$patient3","_selected$dailyToken","_selected$items","mode","setMode","date","setDate","token","setToken","patientId","setPatientId","items","setItems","tax","setTax","discount","setDiscount","loading","setLoading","patientSearch","setPatientSearch","patientResults","setPatientResults","showPatientDropdown","setShowPatientDropdown","selectedPatient","setSelectedPatient","patientLoading","setPatientLoading","searchIndex","setSearchIndex","searchText","setSearchText","searchResults","setSearchResults","searchLoading","setSearchLoading","queryDate","setQueryDate","queryToken","setQueryToken","queryPatientId","setQueryPatientId","results","setResults","selected","setSelected","payAmount","setPayAmount","billRef","queryLoading","setQueryLoading","reportStart","setReportStart","Date","toISOString","slice","reportEnd","setReportEnd","reportStats","setReportStats","totalBilled","totalCollected","count","reportList","setReportList","reportLoading","setReportLoading","todayStr","apptDate","setApptDate","apptStatus","setApptStatus","apptLoading","setApptLoading","appointments","setAppointments","selectedAppt","setSelectedAppt","altIdx","setAltIdx","altSalt","setAltSalt","altList","setAltList","altLoading","setAltLoading","handlePatientSearch","val","length","res","getAll","search","limit","data","e","console","error","selectPatient","p","_id","firstName","lastName","handleMedicineSearch","idx","updateItem","pickMedicine","m","strength","form","sellingPrice","loadLatestPrescription","prefill","pre","map","x","duration","notes","days","doses","success","_e$response","_e$response$data","response","message","field","value","prev","it","i","onQueryAppointments","params","status","_e$response2","_e$response2$data","msg","onChooseAppointment","appt","patient","appointmentId","appointmentDay","dailyToken","_e$response3","_e$response3$data","onSearchAlternatives","salt","onPickAlternative","addItem","removeItem","filter","_","computeSubtotal","reduce","sum","Number","subtotal","total","setDays","qty","setDoses","onEditDispense","d","stock","onCancelDispense","window","confirm","cancelDispense","onQuery","_e$response4","_e$response4$data","_e$response5","_e$response5$data","errors","JSON","stringify","onSaveDispense","payload","updateDispense","newTotal","paid","paidAmount","toFixed","icon","create","_e$response6","_e$response6$data","_e$response7","_e$response7$data","onSelect","onPay","pay","amount","_e$response8","_e$response8$data","_e$response9","_e$response9$data","onPrint","current","printContents","innerHTML","win","open","document","write","close","focus","print","startDate","endDate","_e$response0","_e$response0$data","onGenerateReport","statsRes","getStats","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","type","onChange","target","disabled","a","_a$patient","_a$patient2","_a$patient3","phone","colSpan","placeholder","onFocus","regNo","r","readOnly","_d$patient","_d$patient2","_d$dailyToken","toLocaleDateString","paymentStatus","totalPending","totalRefunds","_d$patient3","_d$patient4","createdAt","toLocaleTimeString","doctor","user","appointmentDate","Math","abs","billNumber","ref","id","max","_c","$RefreshReg$"],"sources":["C:/Users/Kashif/clinic management system antiG/clinic-management-system/frontend/src/pages/Dispensary.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { dispensaryAPI, appointmentAPI, medicinesAPI, patientAPI } from '../services/api';\nimport toast from 'react-hot-toast';\nimport { Search, Plus, Trash, Printer, FileText, User, Calendar } from 'lucide-react';\n\nconst emptyItem = { name: '', quantity: 1, unitPrice: 0 };\n\nconst Dispensary = () => {\n  const [mode, setMode] = useState('today'); // 'today' | 'history' | 'direct' | 'past'\n  const [date, setDate] = useState('');\n  const [token, setToken] = useState('');\n  const [patientId, setPatientId] = useState('');\n  const [items, setItems] = useState([{ ...emptyItem }]);\n  const [tax, setTax] = useState('0');\n  const [discount, setDiscount] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  // Patient Search\n  const [patientSearch, setPatientSearch] = useState('');\n  const [patientResults, setPatientResults] = useState([]);\n  const [showPatientDropdown, setShowPatientDropdown] = useState(false);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const [patientLoading, setPatientLoading] = useState(false);\n\n  // Medicine Search\n  const [searchIndex, setSearchIndex] = useState(null);\n  const [searchText, setSearchText] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [searchLoading, setSearchLoading] = useState(false);\n\n  const [queryDate, setQueryDate] = useState('');\n  const [queryToken, setQueryToken] = useState('');\n  const [queryPatientId, setQueryPatientId] = useState('');\n  const [results, setResults] = useState([]);\n  const [selected, setSelected] = useState(null);\n  const [payAmount, setPayAmount] = useState('');\n  const billRef = useRef(null);\n  const [queryLoading, setQueryLoading] = useState(false);\n\n  // Reports\n  const [reportStart, setReportStart] = useState(new Date().toISOString().slice(0, 10));\n  const [reportEnd, setReportEnd] = useState(new Date().toISOString().slice(0, 10));\n  const [reportStats, setReportStats] = useState({ totalBilled: 0, totalCollected: 0, count: 0 });\n  const [reportList, setReportList] = useState([]);\n  const [reportLoading, setReportLoading] = useState(false);\n\n  // Appointment filter/prefill\n  const todayStr = new Date().toISOString().slice(0, 10);\n  const [apptDate, setApptDate] = useState(todayStr);\n  const [apptStatus, setApptStatus] = useState('prescription dispensed'); // Default to show those ready for dispensing? Or 'completed'?\n  const [apptLoading, setApptLoading] = useState(false);\n  const [appointments, setAppointments] = useState([]);\n  const [selectedAppt, setSelectedAppt] = useState(null);\n\n  // Alternatives search by salt per item index\n  const [altIdx, setAltIdx] = useState(null);\n  const [altSalt, setAltSalt] = useState('');\n  const [altList, setAltList] = useState([]);\n  const [altLoading, setAltLoading] = useState(false);\n\n  // Patient Search Handler\n  const handlePatientSearch = async (val) => {\n    setPatientSearch(val);\n    if (val.length < 2) {\n      setPatientResults([]);\n      return;\n    }\n    try {\n      setPatientLoading(true);\n      // Use backend search\n      const res = await patientAPI.getAll({ search: val, limit: 20 });\n      setPatientResults(res.data.data || []);\n      setShowPatientDropdown(true);\n    } catch (e) {\n      console.error(e);\n    } finally {\n      setPatientLoading(false);\n    }\n  };\n\n  const selectPatient = (p) => {\n    setSelectedPatient(p);\n    setPatientId(p._id);\n    setPatientSearch(`${p.firstName} ${p.lastName}`);\n    setShowPatientDropdown(false);\n\n    // If in past mode, set the query filter\n    if (mode === 'past') {\n      setQueryPatientId(p._id);\n    }\n  };\n\n  // Medicine Search Handler\n  const handleMedicineSearch = async (idx, val) => {\n    updateItem(idx, 'name', val);\n    setSearchIndex(idx);\n    setSearchText(val);\n    if (val.length < 2) {\n      setSearchResults([]);\n      return;\n    }\n    try {\n      setSearchLoading(true);\n      const res = await medicinesAPI.getAll({ search: val, limit: 10 });\n      setSearchResults(res.data.data || []);\n    } catch (e) {\n      console.error(e);\n    } finally {\n      setSearchLoading(false);\n    }\n  };\n\n  const pickMedicine = (m) => {\n    if (searchIndex === null) return;\n    updateItem(searchIndex, 'name', m.name);\n    updateItem(searchIndex, 'strength', m.strength || '');\n    updateItem(searchIndex, 'form', m.form || '');\n    updateItem(searchIndex, 'unitPrice', m.sellingPrice || 0);\n    setSearchResults([]);\n    setSearchText('');\n    setSearchIndex(null);\n  };\n\n  const loadLatestPrescription = async () => {\n    if (!selectedPatient) return toast.error('Select a patient first');\n    try {\n      setLoading(true);\n      const res = await dispensaryAPI.prefill({ patientId: selectedPatient._id });\n      const pre = res.data.data || [];\n      if (pre.length === 0) return toast('No recent prescription found');\n\n      setItems(pre.map(x => ({\n        name: x.name,\n        strength: x.strength || '',\n        form: x.form || '',\n        duration: x.duration || '',\n        quantity: x.quantity || 1,\n        unitPrice: x.unitPrice || 0,\n        notes: x.notes || '',\n        days: '',\n        doses: ''\n      })));\n      toast.success('Loaded latest prescription');\n    } catch (e) {\n      toast.error(e.response?.data?.message || 'Failed to load prescription');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateItem = (idx, field, value) => {\n    setItems(prev => prev.map((it, i) => i === idx ? { ...it, [field]: value } : it));\n  };\n\n  // Auto-load today's scheduled appointments on mount\n  useEffect(() => {\n    onQueryAppointments();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Appointments search for chemist\n  const onQueryAppointments = async () => {\n    try {\n      setApptLoading(true);\n      const params = {};\n      if (apptDate) params.date = apptDate;\n      if (apptStatus) params.status = apptStatus;\n      const res = await appointmentAPI.getAll(params);\n      setAppointments(res.data.data || []);\n      setSelectedAppt(null);\n    } catch (e) {\n      const msg = e.response?.data?.message || 'Failed to fetch appointments';\n      toast.error(msg);\n    } finally {\n      setApptLoading(false);\n    }\n  };\n\n  const onChooseAppointment = async (appt) => {\n    setSelectedAppt(appt);\n    setSelectedPatient(appt.patient); // Set selected patient context\n    try {\n      const res = await dispensaryAPI.prefill({ appointmentId: appt._id });\n      const pre = res.data.data || [];\n      if (pre.length === 0) toast('No prescription found for this appointment');\n      setItems(pre.map(x => ({ name: x.name, strength: x.strength || '', form: x.form || '', duration: x.duration || '', quantity: x.quantity || 1, unitPrice: x.unitPrice || 0, notes: x.notes || '' })));\n\n      // Auto-switch to dispense creation view if we want, or stay in list?\n      // Let's scroll to top or just set mode to 'today' (already is) and populate form\n      setDate(appt.appointmentDay ? new Date(appt.appointmentDay).toISOString().slice(0, 10) : '');\n      setToken(appt.dailyToken || '');\n      setPatientId(appt.patient._id);\n    } catch (e) {\n      const msg = e.response?.data?.message || 'Failed to prefill from prescription';\n      toast.error(msg);\n    }\n  };\n\n  // Alternatives by salt\n  const onSearchAlternatives = async (idx) => {\n    try {\n      if (!altSalt) return toast.error('Enter salt to search alternatives');\n      setAltLoading(true);\n      setAltIdx(idx);\n      const res = await medicinesAPI.getAll({ salt: altSalt, limit: 10 });\n      setAltList(res.data.data || []);\n    } catch (e) {\n      setAltList([]);\n    } finally {\n      setAltLoading(false);\n    }\n  };\n  const onPickAlternative = (m) => {\n    if (altIdx === null) return;\n    updateItem(altIdx, 'name', m.name || '');\n    updateItem(altIdx, 'unitPrice', m.sellingPrice || 0);\n    setAltIdx(null);\n    setAltSalt('');\n    setAltList([]);\n  };\n\n  const addItem = () => setItems(prev => [...prev, { ...emptyItem }]);\n  const removeItem = (idx) => setItems(prev => prev.filter((_, i) => i !== idx));\n\n  const computeSubtotal = () => items.reduce((sum, it) => sum + (Number(it.quantity || 0) * Number(it.unitPrice || 0)), 0);\n  const subtotal = computeSubtotal();\n  const total = subtotal + Number(tax || 0);\n\n  // Quantity helpers\n  const setDays = (idx, days) => {\n    updateItem(idx, 'days', days);\n    const qty = Number(days || 0) * Number(items[idx].doses || 0 || 1);\n    updateItem(idx, 'quantity', qty);\n  };\n  const setDoses = (idx, doses) => {\n    updateItem(idx, 'doses', doses);\n    const qty = Number(doses || 0) * Number(items[idx].days || 0 || 1);\n    updateItem(idx, 'quantity', qty);\n  };\n\n  const onEditDispense = (d) => {\n    setSelected(d);\n    setItems(d.items.map(i => ({ ...i, unitPrice: i.unitPrice, stock: 999 })));\n    setTax(d.tax || '');\n    setDiscount(d.discount || '');\n    setMode('direct');\n    // We use 'direct' mode UI for editing, but we need to know we are editing 'selected'\n    // The save function will check if 'selected' exists and has an ID\n  };\n\n  const onCancelDispense = async (d) => {\n    if (!window.confirm('Are you sure you want to cancel this dispense? Items will be returned to stock.')) return;\n    try {\n      const res = await dispensaryAPI.cancelDispense(d._id);\n      if (res.data.success) {\n        toast.success('Dispense cancelled');\n        onQuery(); // Refresh list\n        if (selected?._id === d._id) setSelected(null);\n      }\n    } catch (e) {\n      console.error('Cancel error:', e);\n      const msg = e.response?.data?.message || (e.response?.data?.errors ? JSON.stringify(e.response.data.errors) : e.message) || 'Error cancelling dispense';\n      toast.error(msg);\n    }\n  };\n\n  const onSaveDispense = async () => {\n    if (items.length === 0) return toast.error('No items to dispense');\n\n    const payload = {\n      items: items.map(i => ({\n        name: i.name,\n        quantity: i.quantity,\n        unitPrice: i.unitPrice,\n        strength: i.strength,\n        form: i.form,\n        duration: i.duration,\n        notes: i.notes\n      })),\n      tax: Number(tax || 0),\n      discount: Number(discount || 0),\n    };\n\n    try {\n      setLoading(true);\n      if (selected && selected._id && mode === 'direct') {\n        // Update existing\n        const res = await dispensaryAPI.updateDispense(selected._id, payload);\n        if (res.data.success) {\n          toast.success('Dispense updated');\n          setSelected(res.data.data);\n          // Auto-fill refund if applicable?\n          const newTotal = res.data.data.total;\n          const paid = res.data.data.paidAmount || 0;\n          if (paid > newTotal) {\n            setPayAmount((newTotal - paid).toFixed(2)); // Negative amount for refund\n            toast('Refund due: ' + (paid - newTotal).toFixed(2), { icon: 'ℹ️' });\n          }\n        }\n      } else {\n        // Create new\n        if (mode === 'today' && selectedAppt) {\n          payload.date = selectedAppt.appointmentDay;\n          payload.token = selectedAppt.dailyToken;\n        } else if (selectedPatient) {\n          payload.patient = selectedPatient._id;\n        } else if (mode === 'token') { // Legacy support if needed, or remove\n          if (!date || !token) return toast.error('Provide date and token');\n          payload.date = date;\n          payload.token = Number(token);\n        } else {\n          return toast.error('No patient selected');\n        }\n\n        const res = await dispensaryAPI.create(payload);\n        toast.success('Dispense created');\n        try {\n          // ensure we have full object\n          if (res.data && res.data.data) {\n            setSelected(res.data.data);\n          }\n        } catch (_) { }\n\n        // Reset form\n        setItems([{ ...emptyItem }]);\n        setTax('0');\n        setDiscount('');\n        if (mode === 'today') {\n          onQueryAppointments();\n        }\n      }\n    } catch (e) {\n      console.error('Save dispense error:', e);\n      const msg = e.response?.data?.message || (e.response?.data?.errors ? JSON.stringify(e.response.data.errors) : e.message) || 'Failed to save dispense';\n      toast.error(msg);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onSelect = (d) => {\n    setSelected(d);\n    setPayAmount('');\n  };\n\n  const onPay = async () => {\n    if (!selected?._id) return toast.error('Select a dispense first');\n    if (!payAmount || Number(payAmount) === 0) return toast.error('Enter valid amount');\n    try {\n      const res = await dispensaryAPI.pay(selected._id, { amount: Number(payAmount) });\n      toast.success('Payment recorded');\n      setSelected(res.data.data);\n      // refresh list entry\n      setResults(prev => prev.map(x => x._id === res.data.data._id ? res.data.data : x));\n      setPayAmount('');\n    } catch (e) {\n      console.error('Payment error:', e);\n      const msg = e.response?.data?.message || (e.response?.data?.errors ? JSON.stringify(e.response.data.errors) : e.message) || 'Payment failed';\n      toast.error(msg);\n    }\n  };\n\n  const onPrint = () => {\n    if (!billRef.current) return;\n    const printContents = billRef.current.innerHTML;\n    const win = window.open('', '', 'width=800,height=600');\n    win.document.write('<html><head><title>Bill</title>');\n    win.document.write(`\n      <style>\n        body { font-family: 'Inter', sans-serif; padding: 40px; color: #1f2937; }\n        .text-center { text-align: center; }\n        .text-right { text-align: right; }\n        .font-bold { font-weight: bold; }\n        .text-sm { font-size: 0.875rem; }\n        .text-xs { font-size: 0.75rem; }\n        .text-gray-500 { color: #6b7280; }\n        .mb-6 { margin-bottom: 1.5rem; }\n        .flex { display: flex; }\n        .justify-between { justify-content: space-between; }\n        table { width: 100%; border-collapse: collapse; margin-bottom: 1.5rem; }\n        th { text-align: left; padding: 0.5rem; border-bottom: 2px solid #e5e7eb; color: #4b5563; font-weight: 600; }\n        td { padding: 0.5rem; border-bottom: 1px solid #f3f4f6; }\n        th.text-right, td.text-right { text-align: right; }\n        th.text-center, td.text-center { text-align: center; }\n        .border-t { border-top: 1px solid #e5e7eb; }\n        .pt-2 { padding-top: 0.5rem; }\n        .w-48 { width: 12rem; }\n        .space-y-2 > * + * { margin-top: 0.5rem; }\n      </style>\n    `);\n    win.document.write('</head><body>');\n    win.document.write(printContents);\n    win.document.write('</body></html>');\n    win.document.close();\n    win.focus();\n    win.print();\n    win.close();\n  };\n\n  const onQuery = async () => {\n    try {\n      setQueryLoading(true);\n      const params = {};\n\n      // If reports mode, use date range\n      if (mode === 'reports') {\n        params.startDate = reportStart;\n        params.endDate = reportEnd;\n      } else {\n        if (queryPatientId) params.patientId = queryPatientId;\n        if (queryDate && queryToken) {\n          params.date = queryDate;\n          params.token = queryToken;\n        }\n        if (!params.patientId && !params.date) return toast.error('Provide patientId or date+token');\n      }\n\n      const res = await dispensaryAPI.getAll(params);\n      if (mode === 'reports') {\n        setReportList(res.data.data || []);\n      } else {\n        setResults(res.data.data || []);\n      }\n      setSelected(null);\n    } catch (e) {\n      const msg = e.response?.data?.message || 'Failed to fetch dispenses';\n      toast.error(msg);\n      console.error('Query dispenses error:', e);\n    } finally {\n      setQueryLoading(false);\n    }\n  };\n\n  const onGenerateReport = async () => {\n    try {\n      setReportLoading(true);\n      // Fetch stats\n      const statsRes = await dispensaryAPI.getStats({ startDate: reportStart, endDate: reportEnd });\n      setReportStats(statsRes.data.data);\n      // Fetch list\n      onQuery();\n    } catch (e) {\n      toast.error('Failed to generate report');\n    } finally {\n      setReportLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6 max-w-6xl mx-auto\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Dispensary</h1>\n        <div className=\"flex space-x-2 bg-gray-100 p-1 rounded-lg\">\n          <button\n            onClick={() => setMode('today')}\n            className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${mode === 'today' ? 'bg-white text-blue-600 shadow' : 'text-gray-600 hover:text-gray-900'}`}\n          >\n            Today's Visits\n          </button>\n          <button\n            onClick={() => setMode('history')}\n            className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${mode === 'history' ? 'bg-white text-blue-600 shadow' : 'text-gray-600 hover:text-gray-900'}`}\n          >\n            Patient History\n          </button>\n          <button\n            onClick={() => setMode('direct')}\n            className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${mode === 'direct' ? 'bg-white text-blue-600 shadow' : 'text-gray-600 hover:text-gray-900'}`}\n          >\n            Direct Dispense\n          </button>\n          <button\n            onClick={() => setMode('past')}\n            className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${mode === 'past' ? 'bg-white text-blue-600 shadow' : 'text-gray-600 hover:text-gray-900'}`}\n          >\n            Past Dispenses\n          </button>\n          <button\n            onClick={() => setMode('reports')}\n            className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${mode === 'reports' ? 'bg-white text-blue-600 shadow' : 'text-gray-600 hover:text-gray-900'}`}\n          >\n            Reports\n          </button>\n        </div>\n      </div>\n\n      {/* Mode: Today's Visits - List */}\n      {mode === 'today' && (\n        <div className=\"card\">\n          {/* ... existing Today's Visits content ... */}\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">Scheduled Appointments</h2>\n            <div className=\"flex gap-2\">\n              <input type=\"date\" className=\"input-field w-auto\" value={apptDate} onChange={(e) => setApptDate(e.target.value)} />\n              <select className=\"input-field w-auto\" value={apptStatus} onChange={(e) => setApptStatus(e.target.value)}>\n                <option value=\"\">All Status</option>\n                <option value=\"scheduled\">Scheduled</option>\n                <option value=\"completed\">Completed</option>\n                <option value=\"prescription dispensed\">Dispensed</option>\n              </select>\n              <button className=\"btn-secondary\" onClick={onQueryAppointments} disabled={apptLoading}>Refresh</button>\n            </div>\n          </div>\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Patient</th>\n                  <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Token</th>\n                  <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Status</th>\n                  <th className=\"px-4 py-2\"></th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {appointments.map((a) => (\n                  <tr key={a._id} className={selectedAppt?._id === a._id ? 'bg-blue-50' : ''}>\n                    <td className=\"px-4 py-2 text-sm text-gray-900\">\n                      <div className=\"font-medium\">{a.patient?.firstName} {a.patient?.lastName}</div>\n                      <div className=\"text-xs text-gray-500\">{a.patient?.phone}</div>\n                    </td>\n                    <td className=\"px-4 py-2 text-sm text-gray-900\">{typeof a.dailyToken !== 'undefined' ? a.dailyToken : '-'}</td>\n                    <td className=\"px-4 py-2 text-sm\">\n                      <span className={`px-2 py-1 rounded-full text-xs ${a.status === 'prescription dispensed' ? 'bg-green-100 text-green-800' : a.status === 'completed' ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-800'}`}>\n                        {a.status}\n                      </span>\n                    </td>\n                    <td className=\"px-4 py-2 text-right\">\n                      <button className=\"btn-sm btn-secondary\" onClick={() => onChooseAppointment(a)}>Select</button>\n                    </td>\n                  </tr>\n                ))}\n                {appointments.length === 0 && <tr><td colSpan=\"4\" className=\"px-4 py-4 text-center text-gray-500\">No appointments found</td></tr>}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* Patient Search (for History, Direct, Past) */}\n      {(mode === 'history' || mode === 'direct' || mode === 'past') && (\n        <div className=\"card\">\n          {/* ... existing Patient Search content ... */}\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Select Patient</h2>\n          <div className=\"relative\">\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n              <Search className=\"h-5 w-5 text-gray-400\" />\n            </div>\n            <input\n              type=\"text\"\n              className=\"input-field pl-10\"\n              placeholder=\"Search patient by name or phone...\"\n              value={patientSearch}\n              onChange={(e) => handlePatientSearch(e.target.value)}\n              onFocus={() => setShowPatientDropdown(true)}\n            />\n            {showPatientDropdown && patientResults.length > 0 && (\n              <div className=\"absolute z-10 w-full mt-1 bg-white border rounded-md shadow-lg max-h-60 overflow-auto\">\n                {patientResults.map(p => (\n                  <button\n                    key={p._id}\n                    className=\"w-full text-left px-4 py-2 hover:bg-gray-50 border-b last:border-b-0\"\n                    onClick={() => selectPatient(p)}\n                  >\n                    <div className=\"font-medium text-gray-900\">{p.firstName} {p.lastName}</div>\n                    <div className=\"text-sm text-gray-500\">Ph: {p.phone} | Reg: {p.regNo}</div>\n                  </button>\n                ))}\n              </div>\n            )}\n            {patientLoading && <div className=\"absolute right-3 top-2 text-sm text-gray-400\">Searching...</div>}\n          </div>\n\n          {selectedPatient && (\n            <div className=\"mt-4 p-3 bg-blue-50 rounded-md border border-blue-100 flex justify-between items-center\">\n              <div>\n                <div className=\"font-medium text-blue-900\">{selectedPatient.firstName} {selectedPatient.lastName}</div>\n                <div className=\"text-sm text-blue-700\">{selectedPatient.phone}</div>\n              </div>\n              {mode === 'history' && (\n                <button className=\"btn-secondary flex items-center gap-2\" onClick={loadLatestPrescription} disabled={loading}>\n                  <FileText className=\"h-4 w-4\" />\n                  Load Latest Prescription\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Dispense Form (Visible in Today, History, Direct) */}\n      {(mode === 'today' || mode === 'history' || mode === 'direct') && (\n        <div className=\"card\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">Dispense Items</h2>\n            <div className=\"text-sm text-gray-500\">\n              {mode === 'token' ? `Token: ${token || '-'}` : selectedPatient ? `Patient: ${selectedPatient.firstName}` : 'No patient selected'}\n            </div>\n          </div>\n\n          <div className=\"space-y-4\">\n            {items.map((it, idx) => (\n              <div key={idx} className=\"p-4 border rounded-lg bg-gray-50 relative\">\n                <div className=\"grid grid-cols-1 md:grid-cols-12 gap-4\">\n                  <div className=\"md:col-span-4 relative\">\n                    <label className=\"form-label\">Medicine</label>\n                    <input\n                      className=\"input-field\"\n                      placeholder=\"Type to search...\"\n                      value={it.name}\n                      onChange={(e) => handleMedicineSearch(idx, e.target.value)}\n                    />\n                    {searchIndex === idx && searchText && (\n                      <div className=\"absolute z-50 w-full mt-1 border rounded bg-white max-h-40 overflow-auto shadow-lg\">\n                        {searchLoading && <div className=\"p-2 text-sm text-gray-500\">Searching...</div>}\n                        {(!searchLoading && searchResults.length === 0) && <div className=\"p-2 text-sm text-gray-500\">No matches</div>}\n                        {searchResults.map((r) => (\n                          <button type=\"button\" key={r._id} className=\"block w-full text-left px-3 py-2 hover:bg-gray-50\" onClick={() => pickMedicine(r)}>\n                            <div className=\"font-medium\">{r.name}</div>\n                            <div className=\"text-xs text-gray-500\">{r.strength} {r.form} • Rs.{r.sellingPrice}</div>\n                          </button>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"md:col-span-2\">\n                    <label className=\"form-label\">Strength</label>\n                    <input className=\"input-field\" value={it.strength || ''} onChange={(e) => updateItem(idx, 'strength', e.target.value)} />\n                  </div>\n                  <div className=\"md:col-span-2\">\n                    <label className=\"form-label\">Qty</label>\n                    <input type=\"number\" className=\"input-field\" value={it.quantity} onChange={(e) => updateItem(idx, 'quantity', e.target.value)} />\n                  </div>\n                  <div className=\"md:col-span-2\">\n                    <label className=\"form-label\">Price</label>\n                    <input type=\"number\" className=\"input-field\" value={it.unitPrice} onChange={(e) => updateItem(idx, 'unitPrice', e.target.value)} />\n                  </div>\n                  <div className=\"md:col-span-2 flex items-end justify-end\">\n                    <div className=\"font-medium text-gray-900\">{(Number(it.quantity || 0) * Number(it.unitPrice || 0)).toFixed(2)}</div>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-12 gap-4 mt-2\">\n                  <div className=\"md:col-span-6\">\n                    <label className=\"form-label\">Instructions/Notes</label>\n                    <input className=\"input-field\" value={it.notes || ''} onChange={(e) => updateItem(idx, 'notes', e.target.value)} placeholder=\"Dosage instructions...\" />\n                  </div>\n                  <div className=\"md:col-span-4 flex items-end gap-2\">\n                    <input className=\"input-field\" placeholder=\"Search Alt (Salt)\" value={altIdx === idx ? altSalt : ''} onChange={(e) => { setAltIdx(idx); setAltSalt(e.target.value); }} />\n                    <button className=\"btn-secondary whitespace-nowrap\" onClick={() => onSearchAlternatives(idx)}>Find Alt</button>\n                  </div>\n                  <div className=\"md:col-span-2 flex items-end justify-end\">\n                    <button className=\"text-red-600 hover:text-red-800 p-2\" onClick={() => removeItem(idx)}><Trash className=\"h-5 w-5\" /></button>\n                  </div>\n                </div>\n\n                {altIdx === idx && (altList.length > 0 || altLoading) && (\n                  <div className=\"mt-2 border rounded p-2 bg-white\">\n                    {altLoading && <div className=\"text-sm text-gray-500\">Searching alternatives...</div>}\n                    {altList.map((m) => (\n                      <button key={m._id} type=\"button\" className=\"block w-full text-left px-3 py-1 hover:bg-gray-50 flex justify-between\" onClick={() => onPickAlternative(m)}>\n                        <span>{m.name} <span className=\"text-gray-500 text-xs\">({m.strength} {m.form})</span></span>\n                        <span className=\"font-medium\">Rs. {Number(m.sellingPrice || 0).toFixed(2)}</span>\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            ))}\n\n            <button className=\"btn-secondary w-full py-3 border-dashed border-2 flex justify-center items-center gap-2\" onClick={addItem}>\n              <Plus className=\"h-4 w-4\" /> Add Item\n            </button>\n          </div>\n\n          <div className=\"mt-6 border-t pt-4\">\n            <div className=\"flex justify-end space-y-1 flex-col items-end\">\n              <div className=\"flex gap-4 text-gray-600\">\n                <span>Subtotal:</span>\n                <span className=\"font-medium w-24 text-right\">{subtotal.toFixed(2)}</span>\n              </div>\n              <div className=\"flex gap-4 items-center\">\n                <span className=\"text-gray-600\">Tax:</span>\n                <input type=\"number\" className=\"input-field w-24 text-right py-1\" value={tax} onChange={(e) => setTax(e.target.value)} />\n              </div>\n              <div className=\"flex gap-4 items-center\">\n                <span className=\"text-gray-600\">Discount:</span>\n                <input type=\"number\" className=\"input-field w-24 text-right py-1\" value={discount} onChange={(e) => setDiscount(e.target.value)} />\n              </div>\n              <div className=\"flex gap-4 text-lg font-bold text-gray-900 mt-2\">\n                <span>Total:</span>\n                <span className=\"w-24 text-right\">{(subtotal + Number(tax || 0) - Number(discount || 0)).toFixed(2)}</span>\n              </div>\n            </div>\n\n            <div className=\"mt-6 flex justify-end\">\n              <button className=\"btn-primary px-8\" onClick={onSaveDispense} disabled={loading}>\n                {loading ? 'Processing...' : (selected && selected._id && mode === 'direct' ? 'Update Dispense' : 'Create Dispense & Bill')}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Dispense History / Find Dispenses (Only in Past Dispenses mode) */}\n      {mode === 'past' && (\n        <div className=\"card\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Search Past Dispenses</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            {/* ID is handled by patient search above, but we keep this hidden or read-only if needed, or remove it to avoid confusion */}\n            <div>\n              <label className=\"form-label\">Patient</label>\n              <input type=\"text\" className=\"input-field bg-gray-100\" value={selectedPatient ? `${selectedPatient.firstName} ${selectedPatient.lastName}` : (queryPatientId || '')} readOnly placeholder=\"Search above...\" />\n            </div>\n            <div>\n              <label className=\"form-label\">Date</label>\n              <input type=\"date\" className=\"input-field\" value={queryDate} onChange={(e) => setQueryDate(e.target.value)} />\n            </div>\n            <div>\n              <label className=\"form-label\">Token</label>\n              <input type=\"number\" className=\"input-field\" value={queryToken} onChange={(e) => setQueryToken(e.target.value)} />\n            </div>\n            <div className=\"flex items-end\">\n              <button className=\"btn-primary\" onClick={onQuery} disabled={queryLoading}>{queryLoading ? 'Searching...' : 'Search Records'}</button>\n            </div>\n          </div>\n\n          <div className=\"mt-4 overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Patient</th>\n                  <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Date/Token</th>\n                  <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Total</th>\n                  <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Status</th>\n                  <th className=\"px-4 py-2\"></th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {results.map(d => (\n                  <tr key={d._id} className={selected?._id === d._id ? 'bg-blue-50' : ''}>\n                    <td className=\"px-4 py-2 text-sm text-gray-900\">{d.patient?.firstName} {d.patient?.lastName}</td>\n                    <td className=\"px-4 py-2 text-sm text-gray-900\">\n                      <div>{d.appointmentDay ? new Date(d.appointmentDay).toLocaleDateString() : '-'}</div>\n                      <div className=\"text-xs text-gray-500\">Token: {d.dailyToken ?? '-'}</div>\n                    </td>\n                    <td className=\"px-4 py-2 text-sm text-gray-900\">{Number(d.total).toFixed(2)}</td>\n                    <td className=\"px-4 py-2 text-sm\">\n                      <span className={`px-2 py-1 rounded-full text-xs ${d.paymentStatus === 'paid' ? 'bg-green-100 text-green-800' : d.paymentStatus === 'cancelled' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'}`}>\n                        {d.paymentStatus}\n                      </span>\n                    </td>\n                    <td className=\"px-4 py-2 text-right space-x-2\">\n                      <button className=\"btn-sm btn-secondary\" onClick={() => onEditDispense(d)} disabled={d.paymentStatus === 'cancelled'}>Edit</button>\n                      <button className=\"btn-sm btn-danger text-red-600 hover:text-red-800\" onClick={() => onCancelDispense(d)} disabled={d.paymentStatus === 'cancelled'}>Cancel</button>\n                      <button className=\"btn-sm btn-secondary\" onClick={() => onSelect(d)}>View Bill</button>\n                    </td>\n                  </tr>\n                ))}\n                {results.length === 0 && <tr><td colSpan=\"5\" className=\"px-4 py-4 text-center text-gray-500\">No records found</td></tr>}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* Reports Mode */}\n      {mode === 'reports' && (\n        <div className=\"space-y-6\">\n          <div className=\"card\">\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Financial Reports</h2>\n            <div className=\"flex gap-4 items-end\">\n              <div>\n                <label className=\"form-label\">From Date</label>\n                <input type=\"date\" className=\"input-field\" value={reportStart} onChange={(e) => setReportStart(e.target.value)} />\n              </div>\n              <div>\n                <label className=\"form-label\">To Date</label>\n                <input type=\"date\" className=\"input-field\" value={reportEnd} onChange={(e) => setReportEnd(e.target.value)} />\n              </div>\n              <button className=\"btn-primary\" onClick={onGenerateReport} disabled={reportLoading}>Generate Report</button>\n            </div>\n          </div>\n\n          {!reportLoading && (\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\n              <div className=\"bg-white p-6 rounded-lg shadow border-l-4 border-blue-500\">\n                <div className=\"text-sm font-medium text-gray-500 uppercase\">Total Sales (Billed)</div>\n                <div className=\"mt-2 text-3xl font-bold text-gray-900\">Rs. {reportStats.totalBilled.toFixed(2)}</div>\n                <div className=\"text-sm text-gray-500 mt-1\">{reportStats.count} Transactions</div>\n              </div>\n              <div className=\"bg-white p-6 rounded-lg shadow border-l-4 border-green-500\">\n                <div className=\"text-sm font-medium text-gray-500 uppercase\">Total Collected (Settled)</div>\n                <div className=\"mt-2 text-3xl font-bold text-gray-900\">Rs. {reportStats.totalCollected.toFixed(2)}</div>\n                <div className=\"text-sm text-gray-500 mt-1\">Net Received</div>\n              </div>\n              <div className=\"bg-white p-6 rounded-lg shadow border-l-4 border-orange-500\">\n                <div className=\"text-sm font-medium text-gray-500 uppercase\">Total Pending</div>\n                <div className=\"mt-2 text-3xl font-bold text-gray-900\">Rs. {reportStats.totalPending?.toFixed(2) || '0.00'}</div>\n                <div className=\"text-sm text-gray-500 mt-1\">To be collected</div>\n              </div>\n              <div className=\"bg-white p-6 rounded-lg shadow border-l-4 border-red-500\">\n                <div className=\"text-sm font-medium text-gray-500 uppercase\">Total Refunds</div>\n                <div className=\"mt-2 text-3xl font-bold text-gray-900\">Rs. {reportStats.totalRefunds?.toFixed(2) || '0.00'}</div>\n                <div className=\"text-sm text-gray-500 mt-1\">To be returned</div>\n              </div>\n            </div>\n          )}\n\n          <div className=\"card\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Detailed Transactions</h3>\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Date</th>\n                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Patient</th>\n                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Type</th>\n                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Billed</th>\n                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Paid</th>\n                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Balance</th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {reportList.map(d => (\n                    <tr key={d._id} className=\"hover:bg-gray-50\">\n                      <td className=\"px-4 py-2 text-sm text-gray-900\">{new Date(d.createdAt).toLocaleDateString()} <span className=\"text-xs text-gray-500\">{new Date(d.createdAt).toLocaleTimeString()}</span></td>\n                      <td className=\"px-4 py-2 text-sm text-gray-900\">{d.patient?.firstName} {d.patient?.lastName}</td>\n                      <td className=\"px-4 py-2 text-sm\">\n                        <span className={`px-2 py-1 rounded-full text-xs ${d.paymentStatus === 'paid' ? 'bg-green-100 text-green-800' : d.paymentStatus === 'cancelled' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'}`}>\n                          {d.paymentStatus}\n                        </span>\n                      </td>\n                      <td className=\"px-4 py-2 text-sm text-gray-900\">{Number(d.total).toFixed(2)}</td>\n                      <td className=\"px-4 py-2 text-sm text-gray-900\">{Number(d.paidAmount || 0).toFixed(2)}</td>\n                      <td className=\"px-4 py-2 text-sm font-medium text-gray-900\">{(Number(d.total) - Number(d.paidAmount || 0)).toFixed(2)}</td>\n                    </tr>\n                  ))}\n                  {reportList.length === 0 && <tr><td colSpan=\"6\" className=\"px-4 py-4 text-center text-gray-500\">No transactions in this period</td></tr>}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )\n      }\n\n      {\n        selectedAppt && (\n          <div className=\"card\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Selected Appointment</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm\">\n              <div><strong>Patient:</strong> {selectedAppt.patient?.firstName} {selectedAppt.patient?.lastName}</div>\n              <div><strong>Doctor:</strong> Dr. {selectedAppt.doctor?.user?.firstName} {selectedAppt.doctor?.user?.lastName}</div>\n              <div><strong>Token:</strong> {typeof selectedAppt.dailyToken !== 'undefined' ? selectedAppt.dailyToken : '-'}</div>\n              <div><strong>Date:</strong> {selectedAppt.appointmentDate ? new Date(selectedAppt.appointmentDate).toLocaleDateString() : '-'}</div>\n              <div><strong>Status:</strong> {selectedAppt.status}</div>\n            </div>\n          </div>\n        )\n      }\n\n      {/* Payment and Bill */}\n      {\n        selected && (\n          <div className=\"card border-t-4 border-blue-500\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <div>\n                <h2 className=\"text-xl font-bold text-gray-900\">Invoice & Payment</h2>\n                <div className=\"text-sm text-gray-500\">Manage payment and print bill for this dispense</div>\n              </div>\n              <button className=\"text-gray-400 hover:text-gray-600\" onClick={() => setSelected(null)}><Trash className=\"h-5 w-5\" /></button>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n              <div className={`bg-gray-50 p-4 rounded-lg ${Number(selected.paidAmount || 0) > Number(selected.total) ? 'border-l-4 border-orange-500' : ''}`}>\n                <label className=\"text-xs font-semibold text-gray-500 uppercase tracking-wider\">\n                  {Number(selected.paidAmount || 0) > Number(selected.total) ? 'Refund Due' : 'Amount Due'}\n                </label>\n                <div className={`text-2xl font-bold mt-1 ${Number(selected.paidAmount || 0) > Number(selected.total) ? 'text-orange-600' : 'text-gray-900'}`}>\n                  Rs. {Math.abs(Number(selected.total) - Number(selected.paidAmount || 0)).toFixed(2)}\n                </div>\n                <div className=\"text-sm text-gray-500 mt-1\">Total: {Number(selected.total).toFixed(2)} | Paid: {Number(selected.paidAmount || 0).toFixed(2)}</div>\n              </div>\n\n              <div className=\"md:col-span-2 flex items-end gap-4\">\n                <div className=\"flex-grow\">\n                  <label className=\"form-label\">Payment Amount</label>\n                  <div className=\"flex gap-2\">\n                    <input type=\"number\" className=\"input-field\" value={payAmount} onChange={(e) => setPayAmount(e.target.value)} placeholder=\"Enter amount...\" />\n                    <button className=\"btn-primary whitespace-nowrap\" onClick={onPay}>Record Payment</button>\n                  </div>\n                </div>\n                <div>\n                  <button className=\"btn-secondary h-[42px] flex items-center gap-2\" onClick={onPrint} disabled={!selected.billNumber && selected.paymentStatus !== 'paid'}>\n                    <Printer className=\"h-4 w-4\" /> Print Bill\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"border rounded-lg overflow-hidden\">\n              <div className=\"bg-gray-100 px-4 py-2 border-b font-medium text-gray-700\">Bill Preview</div>\n              <div ref={billRef} className=\"bg-white p-8\" id=\"printable-bill\">\n                <div className=\"text-center mb-6\">\n                  <h1 className=\"text-2xl font-bold text-gray-900\">CLINIC NAME</h1>\n                  <div className=\"text-sm text-gray-500\">123 Health Street, Medical District</div>\n                  <div className=\"text-sm text-gray-500\">Phone: (123) 456-7890</div>\n                </div>\n\n                <div className=\"flex justify-between mb-6 text-sm\">\n                  <div>\n                    <div className=\"text-gray-500\">Bill To:</div>\n                    <div className=\"font-bold text-gray-900\">{selected.patient?.firstName} {selected.patient?.lastName}</div>\n                    <div>{selected.patient?.phone}</div>\n                  </div>\n                  <div className=\"text-right\">\n                    <div className=\"text-gray-500\">Bill Details:</div>\n                    <div><span className=\"font-medium\">No:</span> {selected.billNumber || 'Pending'}</div>\n                    <div><span className=\"font-medium\">Date:</span> {new Date(selected.createdAt).toLocaleDateString()}</div>\n                    <div><span className=\"font-medium\">Token:</span> {selected.dailyToken ?? '-'}</div>\n                  </div>\n                </div>\n\n                <table className=\"w-full mb-6 text-sm\">\n                  <thead>\n                    <tr className=\"border-b-2 border-gray-200\">\n                      <th className=\"text-left py-2 font-semibold text-gray-600\">Item</th>\n                      <th className=\"text-center py-2 font-semibold text-gray-600\">Qty</th>\n                      <th className=\"text-right py-2 font-semibold text-gray-600\">Price</th>\n                      <th className=\"text-right py-2 font-semibold text-gray-600\">Amount</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-gray-100\">\n                    {selected.items?.map((it, idx) => (\n                      <tr key={idx}>\n                        <td className=\"py-2\">\n                          <div className=\"font-medium text-gray-900\">{it.name}</div>\n                          <div className=\"text-xs text-gray-500\">{it.strength} {it.form}</div>\n                        </td>\n                        <td className=\"text-center py-2\">{it.quantity}</td>\n                        <td className=\"text-right py-2\">{Number(it.unitPrice).toFixed(2)}</td>\n                        <td className=\"text-right py-2\">{(Number(it.quantity) * Number(it.unitPrice)).toFixed(2)}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n\n                <div className=\"flex justify-end\">\n                  <div className=\"w-48 space-y-2 text-sm\">\n                    <div className=\"flex justify-between text-gray-600\">\n                      <span>Subtotal:</span>\n                      <span>{Number(selected.subtotal).toFixed(2)}</span>\n                    </div>\n                    <div className=\"flex justify-between text-gray-600\">\n                      <span>Tax:</span>\n                      <span>{Number(selected.tax).toFixed(2)}</span>\n                    </div>\n                    {selected.discount > 0 && (\n                      <div className=\"flex justify-between text-gray-600\">\n                        <span>Discount:</span>\n                        <span>-{Number(selected.discount).toFixed(2)}</span>\n                      </div>\n                    )}\n                    <div className=\"flex justify-between font-bold text-lg text-gray-900 border-t pt-2\">\n                      <span>Total:</span>\n                      <span>{Number(selected.total).toFixed(2)}</span>\n                    </div>\n                    <div className=\"flex justify-between text-gray-600 pt-1\">\n                      <span>Paid:</span>\n                      <span>{Number(selected.paidAmount || 0).toFixed(2)}</span>\n                    </div>\n                    <div className=\"flex justify-between font-medium text-gray-900 border-t pt-1\">\n                      <span>Balance:</span>\n                      <span>{Math.max(0, Number(selected.total) - Number(selected.paidAmount || 0)).toFixed(2)}</span>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"mt-8 text-center text-xs text-gray-400\">\n                  Thank you for your visit. Get well soon!\n                </div>\n              </div>\n            </div>\n          </div>\n        )\n      }\n    </div >\n  );\n};\n\nexport default Dispensary;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}